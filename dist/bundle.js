(function () {
'use strict';

// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
function debounce(func, wait, immediate) {
    var timeout;
    return function () {
        var context = this,
            args = arguments;
        clearTimeout(timeout);
        timeout = setTimeout(function () {
            timeout = null;
            if (!immediate) func.apply(context, args);
        }, wait);
        if (immediate && !timeout) func.apply(context, args);
    };
}

/* global Redux */

var initialState = {
    theme: 'pop',
    dataset: 'acs1115',
    geoscheme: 'State-County-Tract-BlockGroup'
};

function app(state, action) {
    if (typeof state === 'undefined') {
        return initialState;
    }

    switch (action.type) {
    case 'CHANGE THEME':
        return Object.assign({}, state, {
            theme: action.value
        });
    case 'CHANGE DATASET':
        return Object.assign({}, state, {
            dataset: action.value
        });
    case 'CHANGE GEOSCHEME':
        return Object.assign({}, state, {
            geoscheme: action.value
        });
    default:
        return state;
    }

}

// Create a Redux store holding the state of your app.
// Its API is { subscribe, dispatch, getState }.
var Store = Redux.createStore(app);

// You can use subscribe() to update the UI in response to state changes.
// Normally you'd use a view binding library (e.g. React Redux) rather than subscribe() directly.
// However it can also be handy to persist the current state in the localStorage.

Store.subscribe(function () {
    console.log(Store.getState());
});


function observeStore(property, onChange) {
    let currentState = Store.getState()[property];

    function handleChange() {
        let nextState = Store.getState()[property];
        if (nextState !== currentState) {
            currentState = nextState;
            onChange(currentState);
        }
    }

    let unsubscribe = Store.subscribe(handleChange);

    return unsubscribe;
}

var dataset = {

    "acs1115": {
        "source": "",
        "title": "ACS 11-15",
        "type": "ACS",
        "sources": {
            "state": {
                "type": "vector",
                "tiles": ["https://tiles.red-meteor.com/mbtiles/state_carto_2015/{z}/{x}/{y}.pbf"]
            },
            "county": {
                "type": "vector",
                "tiles": ["https://tiles.red-meteor.com/mbtiles/county_carto_2015/{z}/{x}/{y}.pbf"]
            },
            "tract": {
                "type": "vector",
                "tiles": ["https://tiles.red-meteor.com/mbtiles/tract_carto_2015/{z}/{x}/{y}.pbf"]
            },
            "bg": {
                "type": "vector",
                "tiles": ["https://tiles.red-meteor.com/mbtiles/bg_carto_2015/{z}/{x}/{y}.pbf"]
            },
            "place": {
                "type": "vector",
                "tiles": ["https://tiles.red-meteor.com/mbtiles/place_carto_2015/{z}/{x}/{y}.pbf"]
            }
        }
    },
    "acs1014": {
        "source": "",
        "title": "ACS 10-14",
        "type": "ACS"
    },
    "c2010": {
        "source": "",
        "title": "Census 2010",
        "type": "Census"
    },
    "c2000": {
        "source": "",
        "title": "Census 2000",
        "type": "Census"
    }

};

var geo = {

    "acs1115": {
        "State-County-Tract-BlockGroup": {
            "state": [3, 5],
            "county": [5, 9],
            "tract": [9, 12],
            "bg": [12, 14]
        },
        "State-Place": {
            "state": [3, 9],
            "place": [9, 14]
        },
        "State-County": {
            "state": [3, 9],
            "county": [9, 14]
        },
        "County-Tract": {
            "county": [3, 9],
            "tract": [9, 14]
        }
    },
    "acs1014": {
        "State-County-Tract-BlockGroup": {
            "state": [3, 5],
            "county": [5, 9],
            "tract": [9, 12],
            "bg": [12, 14]
        },
        "County-Tract-BlockGroup": {
            "county": [3, 9],
            "tract": [9, 12],
            "bg": [12, 14]
        }
    },
    "c2010": {

    },
    "c2000": {

    },
    "c1990": {

    },
    "c1980": {

    }

};

function setTileSources(map) {

    // remove old sources
    // TODO

    var sources_obj = dataset[Store.getState().dataset].sources;

    console.log(sources_obj);

    Object.keys(sources_obj).forEach(function (key) {
        map.addSource(key, sources_obj[key]);
    });

}


function setTileLayers(map) {

    // remove old layers
    // TODO

    var current_store_values = Store.getState();
    var current_dataset = current_store_values.dataset;
    var geoscheme = current_store_values.geoscheme;

    Object.keys(geo[current_dataset][geoscheme]).forEach(function (key) {

        var obj = {
            "id": key + "-fill",
            "type": "fill",
            "source": key,
            "source-layer": key + "geojson",
            "minzoom": geo[current_dataset][geoscheme][key][0],
            "maxzoom": geo[current_dataset][geoscheme][key][1],
            "paint": {
                "fill-color": {
                    "property": "geonum",
                    "type": "categorical",
                    "default": "transparent",
                    "stops": [["0", "blue"]]
                }
            }
        };

        map.addLayer(obj, 'road_major_motorway');
    });

}

var computed_breaks = {
    "acs1014": {
        "mhi": {
            "state": {
                "ckmeans5": [64792, 55579, 48737, 39464],
                "ckmeans7": [39464, 46235, 51872, 56423, 64792, 69899],
                "ckmeans9": [69899, 64792, 58687, 55579, 51872, 47764, 44621, 39464],
                "stddev7": [67329.0478109798, 62320.198540653204, 57311.3492703266, 52302.5, 47293.6507296734, 42284.801459346796, 37275.952189020194],
                "stddev8": [77346.74635163302, 67329.0478109798, 57311.3492703266, 47293.6507296734, 37275.952189020194, 27258.25364836699],
                "quantile5": [60828, 54447, 49342, 46235],
                "quantile7": [65986, 59448, 52738, 50338, 47334, 44968],
                "quantile9": [68201, 60294, 57166, 52716, 50521, 48804, 46693, 43511],
                "quantile11": [69235, 61489, 59448, 56423, 52716, 50521, 48849, 47334, 45033, 43342],
                "min": 19686,
                "max": 74149,
                "mean": 53468.78846153846,
                "median": 52302.5,
                "stddev": 10017.698540653204,
                "sample": []
            },
            "county": {
                "ckmeans5": [75998, 58456, 46965, 37648],
                "ckmeans7": [34653, 41665, 48679, 56949, 67286, 81736],
                "ckmeans9": [89886, 77335, 66693, 57214, 49874, 44138, 38925, 33224],
                "stddev7": [64141.21496124395, 57591.97664082931, 51042.73832041465, 44493.5, 37944.26167958535, 31395.023359170696, 24845.785038756047],
                "stddev8": [77239.69160207326, 64141.21496124395, 51042.73832041465, 37944.26167958535, 24845.785038756047, 11747.30839792674],
                "quantile5": [54961, 47088.5, 41777.5, 36501],
                "quantile7": [59560, 51000, 46074, 42476, 38802, 34614],
                "quantile9": [62412, 53900, 49527, 45606, 42926, 40143, 37009, 33293],
                "quantile11": [65124, 55805, 51454, 48306, 45472, 43107, 40943, 38556, 36094, 32553],
                "min": 21300,
                "max": 110133,
                "mean": 46772.157,
                "median": 44493.5,
                "stddev": 13098.476640829304,
                "sample": []
            },
            "bg": {
                "ckmeans5": [130556, 86250, 57431, 35879],
                "ckmeans7": [30800, 47007, 63938, 85511, 111300, 145694],
                "ckmeans9": [150000, 117114, 92762, 72908, 58152, 44946, 32469, 17464],
                "stddev7": [96046.49513150136, 80298.83008766758, 64551.16504383379, 48803.5, 33055.83495616621, 17308.169912332425, 1560.5048684986396],
                "stddev8": [127541.82521916894, 96046.49513150136, 64551.16504383379, 33055.83495616621, 1560.5048684986396, -29934.82521916894],
                "quantile5": [75429.5, 55603.5, 42116, 30833.5],
                "quantile7": [86862, 64777, 53482, 43958, 36130, 27545],
                "quantile9": [96438, 71563, 60972, 52109, 45000, 38571, 32128, 25368],
                "quantile11": [102708, 77761, 65703, 58859, 51310, 45556, 40580, 35375, 29414, 23750],
                "min": 0,
                "max": 202700,
                "mean": 55637.808,
                "median": 48803.5,
                "stddev": 31495.330087667575,
                "sample": []
            },
            "tract": {
                "ckmeans5": [97460, 70236, 51389, 35236],
                "ckmeans7": [29333, 42182, 56266, 73731, 97460, 135417],
                "ckmeans9": [135417, 99950, 80240, 66382, 55991, 46547, 37330, 26432],
                "stddev7": [79273.1948964509, 68143.79659763393, 57014.39829881697, 45885, 34755.60170118303, 23626.203402366064, 12496.805103549093],
                "stddev8": [101531.99149408484, 79273.1948964509, 57014.39829881697, 34755.60170118303, 12496.805103549093, -9761.99149408484],
                "quantile5": [65899.5, 50993, 41859, 32645.5],
                "quantile7": [72237, 58483, 49306, 43000, 36484, 29893],
                "quantile9": [77426, 63483, 54924, 48750, 43477, 38581, 33750, 27775],
                "quantile11": [82683, 67986, 59309, 53185, 48311, 43783, 40230, 36006, 31870, 26290],
                "min": 0,
                "max": 186949,
                "mean": 50303.631,
                "median": 45885,
                "stddev": 22258.796597633936,
                "sample": []
            },
            "place": {
                "ckmeans5": [96427, 65625, 44063, 18750],
                "ckmeans7": [14318, 31750, 44375, 57750, 75833, 107639],
                "ckmeans9": [121432, 91806, 74000, 59688, 48324, 38704, 29129, 12292],
                "stddev7": [78636.22966831017, 66769.31977887345, 54902.40988943673, 43035.5, 31168.590110563273, 19301.68022112655, 7434.770331689826],
                "stddev8": [102370.04944718363, 78636.22966831017, 54902.40988943673, 31168.590110563273, 7434.770331689826, -16299.049447183628],
                "quantile5": [63386, 49188, 39522.5, 30666.5],
                "quantile7": [70481, 56330, 47354, 40657, 34750, 26250],
                "quantile9": [75256, 61607, 53125, 46458, 41111, 36781, 32103, 23158],
                "quantile11": [79013, 64911, 57750, 51250, 45804, 41500, 38162, 34250, 29028, 21250],
                "min": 0,
                "max": 163151,
                "mean": 46636.031,
                "median": 43035.5,
                "stddev": 23733.81977887345,
                "sample": []
            }
        },
        "mhv": {
            "bg": {
                "ckmeans5": [568200, 322800, 221300, 123500],
                "ckmeans7": [65000, 147700, 215600, 285500, 372100, 568200],
                "ckmeans9": [865200, 525600, 386600, 304200, 242800, 193000, 138900, 61100],
                "stddev7": [373641.4349220594, 321227.62328137294, 268813.8116406865, 216400, 163986.18835931353, 111572.37671862704, 59158.565077940555],
                "stddev8": [478469.05820343236, 373641.4349220594, 268813.8116406865, 163986.18835931353, 59158.565077940555, -45669.05820343239],
                "quantile5": [285600, 238000, 195950, 155450],
                "quantile7": [314700, 263100, 232300, 199800, 171400, 129200],
                "quantile9": [333900, 276700, 251800, 228400, 203000, 181800, 161400, 112500],
                "quantile11": [350800, 295500, 265900, 244800, 225700, 205600, 189100, 169800, 152000, 101300],
                "min": 0,
                "max": 1000001,
                "mean": 222569.801,
                "median": 216400,
                "stddev": 104827.62328137296,
                "sample": []
            },
            "tract": {
                "ckmeans5": [774000, 476700, 274700, 152000],
                "ckmeans7": [119800, 204400, 291800, 401200, 580000, 810700],
                "ckmeans9": [810700, 580000, 417100, 318300, 248200, 195000, 140100, 74500],
                "stddev7": [447070.9592426424, 364897.3061617616, 282723.65308088076, 200550, 118376.34691911921, 36202.693838238425, -45970.95924264236],
                "stddev8": [611418.2654044039, 447070.9592426424, 282723.65308088076, 118376.34691911921, -45970.95924264236, -210318.2654044039],
                "quantile5": [299550, 226000, 179100, 128200],
                "quantile7": [350100, 260100, 220500, 184700, 154800, 108700],
                "quantile9": [376400, 286000, 243600, 216100, 188700, 166900, 138000, 97200],
                "quantile11": [406700, 319400, 265200, 235000, 212600, 190100, 171300, 151300, 122400, 84400],
                "min": 0,
                "max": 1000001,
                "mean": 236197.513,
                "median": 200550,
                "stddev": 164347.30616176157,
                "sample": []
            },
            "state": {
                "ckmeans5": [454500, 319900, 212500, 148000],
                "ckmeans7": [126300, 153600, 212500, 257200, 319900, 454500],
                "ckmeans9": [454500, 371400, 319900, 274500, 232900, 185200, 153600, 126300],
                "stddev7": [292217.70181799575, 249445.1345453305, 206672.56727266527, 163900, 121127.43272733474, 78354.86545466949, 35582.29818200423],
                "stddev8": [377762.8363633263, 292217.70181799575, 206672.56727266527, 121127.43272733474, 35582.29818200423, -49962.83636332629],
                "quantile5": [243500, 185200, 148000, 129400],
                "quantile7": [274500, 234100, 173600, 156200, 135700, 122700],
                "quantile9": [287500, 241200, 212500, 167100, 159300, 139900, 129600, 121600],
                "quantile11": [319900, 246300, 234100, 189300, 167100, 159300, 140400, 135700, 126300, 120200],
                "min": 100200,
                "max": 504500,
                "mean": 193273.07692307694,
                "median": 163900,
                "stddev": 85545.13454533051,
                "sample": []
            },
            "county": {
                "ckmeans5": [496800, 310300, 186900, 115300],
                "ckmeans7": [101600, 147700, 207200, 286600, 412800, 664100],
                "ckmeans9": [664100, 483800, 386900, 300000, 225400, 171900, 131800, 95800],
                "stddev7": [252872.24089201613, 207414.82726134406, 161957.41363067203, 116500, 71042.58636932797, 25585.17273865592, -19872.240892016125],
                "stddev8": [343787.06815336016, 252872.24089201613, 161957.41363067203, 71042.58636932797, -19872.240892016125, -110787.06815336019],
                "quantile5": [181600, 131500, 101100, 82400],
                "quantile7": [212300, 156700, 126000, 105300, 88100, 77100],
                "quantile9": [235200, 174400, 144000, 123900, 107300, 92800, 84200, 73600],
                "quantile11": [251600, 189300, 159200, 137800, 122600, 108600, 96700, 87700, 81000, 71500],
                "min": 0,
                "max": 785100,
                "mean": 142760.2,
                "median": 116500,
                "stddev": 90914.82726134408,
                "sample": []
            },
            "place": {
                "ckmeans5": [699400, 386700, 207500, 103300],
                "ckmeans7": [61600, 139200, 230700, 386700, 588500, 861100],
                "ckmeans9": [861100, 627500, 456500, 317400, 215800, 147400, 95000, 39400],
                "stddev7": [365105.3390159933, 285120.22601066215, 205135.11300533108, 125150, 45164.88699466891, -34820.22601066218, -114805.33901599329],
                "stddev8": [525075.5650266554, 365105.3390159933, 205135.11300533108, 45164.88699466891, -114805.33901599329, -274775.56502665544],
                "quantile5": [222400, 156900, 108100, 72350],
                "quantile7": [262600, 186200, 150000, 113700, 88300, 55500],
                "quantile9": [300900, 209400, 172300, 143800, 116600, 96300, 78300, 43600],
                "quantile11": [346700, 235000, 189600, 165600, 140800, 118800, 102000, 86300, 66500, 23800],
                "min": 0,
                "max": 1000001,
                "mean": 168971.608,
                "median": 125150,
                "stddev": 159970.22601066218,
                "sample": []
            }
        },
        "mfi": {
            "state": {
                "ckmeans5": [80371, 68787, 60414, 49125],
                "ckmeans7": [49125, 59068, 64636, 70187, 77939, 86132],
                "ckmeans9": [86132, 80371, 76190, 70187, 64636, 59068, 54724, 49125],
                "stddev7": [83069.57461392088, 77119.71640928059, 71169.8582046403, 65220, 59270.141795359705, 53320.28359071941, 47370.425386079114],
                "stddev8": [94969.29102320148, 83069.57461392088, 71169.8582046403, 59270.141795359705, 47370.425386079114, 35470.70897679852],
                "quantile5": [73817, 67612, 61684, 56922],
                "quantile7": [80371, 72683, 67232, 61890, 59068, 55459],
                "quantile9": [82791, 73217, 70967, 66829, 61958, 60440, 57176, 54801],
                "quantile11": [83714, 76190, 72683, 70187, 66829, 61958, 60581, 59068, 56755, 54724],
                "min": 23235,
                "max": 89416,
                "mean": 65886.61538461539,
                "median": 65220,
                "stddev": 11899.71640928059,
                "sample": []
            },
            "bg": {
                "ckmeans5": [143036, 102647, 75833, 49261],
                "ckmeans7": [36396, 59167, 79375, 101750, 133250, 183815],
                "ckmeans9": [192852, 142115, 114722, 94425, 77054, 59938, 43056, 21298],
                "stddev7": [126883.57781708174, 109465.88521138782, 92048.19260569391, 74630.5, 57212.80739430609, 39795.114788612176, 22377.422182918264],
                "stddev8": [161718.96302846956, 126883.57781708174, 92048.19260569391, 57212.80739430609, 22377.422182918264, -12457.96302846956],
                "quantile5": [104031.5, 82939, 68201.5, 51130.5],
                "quantile7": [111892, 93636, 81136, 69974, 59545, 45474],
                "quantile9": [119107, 100735, 88958, 79643, 70833, 63516, 53318, 41389],
                "quantile11": [124865, 106875, 95000, 86797, 78992, 71923, 65417, 57679, 48875, 38438],
                "min": 0,
                "max": 250001,
                "mean": 78986.035,
                "median": 74630.5,
                "stddev": 34835.385211387824,
                "sample": []
            },
            "county": {
                "ckmeans5": [90387, 69649, 55952, 45442],
                "ckmeans7": [41319, 48425, 55334, 63342, 74569, 91795],
                "ckmeans9": [105275, 90387, 79073, 69649, 61655, 54680, 48045, 40980],
                "stddev7": [77373.95934163204, 69957.47289442137, 62540.986447210686, 55124.5, 47708.013552789314, 40291.527105578636, 32875.04065836796],
                "stddev8": [92206.93223605341, 77373.95934163204, 62540.986447210686, 47708.013552789314, 32875.04065836796, 18042.067763946587],
                "quantile5": [66395, 58294, 51508, 45805],
                "quantile7": [71113, 62036, 57480, 52270, 48194, 43414],
                "quantile9": [75801, 65283, 60270, 56971, 52541, 49677, 46555, 42148],
                "quantile11": [78167, 67625, 62502, 59402, 56696, 53056, 50433, 47773, 45188, 41183],
                "min": 26112,
                "max": 129474,
                "mean": 57324.981,
                "median": 55124.5,
                "stddev": 14832.972894421364,
                "sample": []
            },
            "tract": {
                "ckmeans5": [185656, 115762, 80579, 52756],
                "ckmeans7": [40139, 60707, 80579, 103086, 135192, 200938],
                "ckmeans9": [200938, 147500, 115762, 95000, 78456, 62617, 46534, 23651],
                "stddev7": [121534.25131424297, 103767.33420949531, 86000.41710474766, 68233.5, 50466.582895252344, 32699.66579050469, 14932.748685757033],
                "stddev8": [157068.0855237383, 121534.25131424297, 86000.41710474766, 50466.582895252344, 14932.748685757033, -20601.08552373828],
                "quantile5": [96521, 75586, 61459.5, 48451],
                "quantile7": [104605, 85929, 73967, 63077, 54063, 43729],
                "quantile9": [110833, 93362, 81005, 72917, 64083, 56875, 50292, 40320],
                "quantile11": [116833, 98355, 87625, 78114, 72240, 64654, 58333, 53281, 46882, 37679],
                "min": 0,
                "max": 250001,
                "mean": 74258.99,
                "median": 68233.5,
                "stddev": 35533.83420949531,
                "sample": []
            },
            "place": {
                "ckmeans5": [135625, 81250, 52750, 21250],
                "ckmeans7": [18125, 42250, 59063, 78247, 99984, 149101],
                "ckmeans9": [149101, 102109, 82772, 67386, 55417, 44375, 33333, 14375],
                "stddev7": [94861.357918533, 80532.57194568866, 66203.78597284433, 51875, 37546.21402715567, 23217.428054311335, 8888.642081466998],
                "stddev8": [123518.92986422166, 94861.357918533, 66203.78597284433, 37546.21402715567, 8888.642081466998, -19768.92986422166],
                "quantile5": [73886.5, 58229, 46464, 35417],
                "quantile7": [81563, 66667, 56250, 47917, 40417, 30000],
                "quantile9": [88008, 72375, 62813, 55625, 49063, 43250, 36250, 25179],
                "quantile11": [91120, 75734, 67750, 61250, 54583, 49750, 44813, 39688, 33889, 18125],
                "min": 0,
                "max": 201797,
                "mean": 54133.322,
                "median": 51875,
                "stddev": 28657.571945688665,
                "sample": []
            }
        },
        "pci": {
            "state": {
                "ckmeans5": [46502, 32829, 27907, 20956],
                "ckmeans7": [20956, 25427, 28912, 31642, 36359, 46502],
                "ckmeans9": [46502, 36359, 32829, 30765, 28912, 25977, 23741, 20956],
                "stddev7": [35108.59733574185, 32489.8982238279, 29871.19911191395, 27252.5, 24633.80088808605, 22015.1017761721, 19396.402664258152],
                "stddev8": [40345.99555956975, 35108.59733574185, 29871.19911191395, 24633.80088808605, 19396.402664258152, 14159.004440430253],
                "quantile5": [31642, 28912, 26311, 24695],
                "quantile7": [33129, 30191, 27621, 26513, 25427, 23948],
                "quantile9": [33958, 31233, 29552, 27367, 26515, 25977, 24775, 23741],
                "quantile11": [36359, 31674, 30191, 29535, 27367, 26515, 26006, 25427, 24312, 23237],
                "min": 11331,
                "max": 46502,
                "mean": 28159.365384615383,
                "median": 27252.5,
                "stddev": 5237.398223827899,
                "sample": []
            },
            "tract": {
                "ckmeans5": [95461, 53449, 33733, 21786],
                "ckmeans7": [17128, 26699, 36828, 51976, 83961, 148918],
                "ckmeans9": [148918, 98354, 73126, 51976, 39613, 30811, 23202, 14894],
                "stddev7": [54097.64794815273, 45315.43196543516, 36533.21598271758, 27751, 18968.78401728242, 10186.568034564847, 1404.3520518472724],
                "stddev8": [71662.07991358789, 54097.64794815273, 36533.21598271758, 18968.78401728242, 1404.3520518472724, -16160.079913587884],
                "quantile5": [38545, 30611.5, 25454, 19798.5],
                "quantile7": [42633, 34740, 29852, 26124, 22520, 17783],
                "quantile9": [45203, 37386, 32949, 29348, 26515, 23742, 20442, 16509],
                "quantile11": [47708, 39786, 35169, 31792, 29146, 26932, 24487, 22196, 19247, 15611],
                "min": 0,
                "max": 196937,
                "mean": 31036.06,
                "median": 27751,
                "stddev": 17564.431965435153,
                "sample": []
            },
            "county": {
                "ckmeans5": [42446, 31494, 24802, 19969],
                "ckmeans7": [17517, 21080, 24570, 28648, 33844, 42446],
                "ckmeans9": [43548, 35987, 31494, 27462, 24570, 21986, 19300, 16228],
                "stddev7": [32137.084584855445, 29024.2230565703, 25911.36152828515, 22798.5, 19685.63847171485, 16572.7769434297, 13459.915415144555],
                "stddev8": [38362.807641425745, 32137.084584855445, 25911.36152828515, 19685.63847171485, 13459.915415144555, 7234.192358574255],
                "quantile5": [27681, 23970, 21542.5, 19044],
                "quantile7": [29499, 25854, 23686, 21774, 20154, 18139],
                "quantile9": [30863, 27132, 25020, 23459, 21986, 20737, 19412, 17694],
                "quantile11": [32700, 28138, 26144, 24446, 23415, 22132, 21157, 20022, 18774, 17344],
                "min": 8200,
                "max": 58004,
                "mean": 23838.417,
                "median": 22798.5,
                "stddev": 6225.723056570298,
                "sample": []
            },
            "bg": {
                "ckmeans5": [75566, 47513, 33506, 22247],
                "ckmeans7": [17190, 25402, 32507, 40645, 52031, 75566],
                "ckmeans9": [95394, 68896, 50982, 40986, 34168, 28196, 22247, 15032],
                "stddev7": [50913.83422858908, 43835.22281905939, 36756.611409529694, 29678, 22599.388590470306, 15520.77718094061, 8442.165771410913],
                "stddev8": [65071.05704764848, 50913.83422858908, 36756.611409529694, 22599.388590470306, 8442.165771410913, -5715.057047648479],
                "quantile5": [39829.5, 32641.5, 27415, 21605.5],
                "quantile7": [43332, 36616, 31672, 28099, 24571, 19101],
                "quantile9": [45856, 38888, 34784, 31252, 28429, 25689, 22669, 17648],
                "quantile11": [48863, 41112, 37107, 33746, 30928, 28717, 26512, 24230, 20926, 16149],
                "min": 0,
                "max": 127349,
                "mean": 31813.252,
                "median": 29678,
                "stddev": 14157.22281905939,
                "sample": []
            },
            "place": {
                "ckmeans5": [77242, 38287, 23650, 12851],
                "ckmeans7": [8211, 18009, 25850, 35418, 51380, 92666],
                "ckmeans9": [92666, 51380, 37327, 29269, 23145, 18217, 13443, 6217],
                "stddev7": [40358.83779217919, 33869.058528119465, 27379.279264059733, 20889.5, 14399.72073594027, 7909.941471880538, 1420.1622078208093],
                "stddev8": [53338.396320298656, 40358.83779217919, 27379.279264059733, 14399.72073594027, 1420.1622078208093, -11559.396320298656],
                "quantile5": [30081.5, 23624.5, 18944.5, 14903],
                "quantile7": [32962, 26861, 22886, 19467, 16541, 12914],
                "quantile9": [34926, 28956, 25270, 22474, 19707, 17546, 15205, 11592],
                "quantile11": [37085, 31171, 27079, 24532, 22288, 19935, 18307, 16385, 14407, 10754],
                "min": 0,
                "max": 122922,
                "mean": 23033.011,
                "median": 20889.5,
                "stddev": 12979.558528119462,
                "sample": []
            }
        },
        "myb": {
            "county": {
                "ckmeans5": [1987, 1979, 1970, 1960],
                "ckmeans7": [1952, 1961, 1969, 1976, 1982, 1989],
                "ckmeans9": [1991, 1986, 1982, 1978, 1974, 1968, 1961, 1952],
                "stddev7": [1993.9370041099323, 1988.6246694066215, 1983.3123347033109, 1978, 1972.6876652966891, 1967.3753305933785, 1962.0629958900677],
                "stddev8": [2004.561673516554, 1993.9370041099323, 1983.3123347033109, 1972.6876652966891, 1962.0629958900677, 1951.438326483446],
                "quantile5": [1986, 1980, 1976, 1969],
                "quantile7": [1987, 1983, 1980, 1977, 1973, 1964],
                "quantile9": [1989, 1985, 1982, 1979, 1977, 1974, 1971, 1962],
                "quantile11": [1990, 1986, 1984, 1981, 1979, 1977, 1975, 1973, 1968, 1961],
                "min": 1939,
                "max": 2002,
                "mean": 1976.98,
                "median": 1978,
                "stddev": 10.62466940662157,
                "sample": []
            },
            "state": {
                "ckmeans5": [1985, 1980, 1972, 1964],
                "ckmeans7": [1956, 1964, 1970, 1975, 1980, 1985],
                "ckmeans9": [1989, 1984, 1980, 1977, 1974, 1970, 1964, 1956],
                "stddev7": [1988.9345008743987, 1984.6230005829325, 1980.3115002914662, 1976, 1971.6884997085338, 1967.3769994170675, 1963.0654991256013],
                "stddev8": [1997.5575014573312, 1988.9345008743987, 1980.3115002914662, 1971.6884997085338, 1963.0654991256013, 1954.4424985426688],
                "quantile5": [1982, 1978, 1975, 1969],
                "quantile7": [1984, 1981, 1978, 1975, 1972, 1966],
                "quantile9": [1985, 1982, 1980, 1977, 1975, 1973, 1970, 1964],
                "quantile11": [1986, 1983, 1981, 1980, 1977, 1975, 1974, 1972, 1967, 1961],
                "min": 1951,
                "max": 1993,
                "mean": 1975.4038461538462,
                "median": 1976,
                "stddev": 8.623000582932514,
                "sample": []
            },
            "tract": {
                "ckmeans5": [1991, 1977, 1961, 1939],
                "ckmeans7": [1939, 1951, 1965, 1976, 1986, 1996],
                "ckmeans9": [1998, 1990, 1984, 1978, 1971, 1962, 1950, 1939],
                "stddev7": [2590.605498728276, 2387.4036658188506, 2184.2018329094253, 1981, 1777.7981670905747, 1574.5963341811491, 1371.3945012717238],
                "stddev8": [2997.009164547127, 2590.605498728276, 2184.2018329094253, 1777.7981670905747, 1371.3945012717238, 964.990835452873],
                "quantile5": [1992.5, 1985, 1978, 1965],
                "quantile7": [1995, 1989, 1984, 1979, 1972, 1958],
                "quantile9": [1999, 1992, 1987, 1983, 1979, 1975, 1967, 1955],
                "quantile11": [2000, 1993, 1989, 1986, 1983, 1980, 1977, 1971, 1963, 1952],
                "min": 0,
                "max": 2006,
                "mean": 1893.097,
                "median": 1981,
                "stddev": 406.4036658188508,
                "sample": []
            },
            "bg": {
                "ckmeans5": [1986, 1971, 1954, 1939],
                "ckmeans7": [1939, 1949, 1961, 1972, 1981, 1990],
                "ckmeans9": [1995, 1987, 1980, 1972, 1963, 1954, 1945, 1939],
                "stddev7": [2288.9853730033083, 2185.6569153355385, 2082.3284576677693, 1979, 1875.6715423322307, 1772.3430846644612, 1669.014626996692],
                "stddev8": [2495.642288338847, 2288.9853730033083, 2082.3284576677693, 1875.6715423322307, 1669.014626996692, 1462.3577116611532],
                "quantile5": [1988, 1983, 1976, 1962],
                "quantile7": [1991, 1986, 1982, 1977, 1968, 1957],
                "quantile9": [1992, 1988, 1984, 1981, 1977, 1973, 1964, 1954],
                "quantile11": [1993, 1989, 1986, 1983, 1981, 1978, 1974, 1968, 1960, 1952],
                "min": 0,
                "max": 2004,
                "mean": 1954.312,
                "median": 1979,
                "stddev": 206.65691533553868,
                "sample": []
            },
            "place": {
                "ckmeans5": [1986, 1972, 1954, 1939],
                "ckmeans7": [1939, 1951, 1966, 1977, 1985, 1993],
                "ckmeans9": [1997, 1989, 1982, 1976, 1969, 1961, 1949, 1939],
                "stddev7": [2476.9930672047553, 2310.9953781365034, 2144.997689068252, 1979, 1813.0023109317483, 1647.0046218634966, 1481.0069327952447],
                "stddev8": [2808.9884453412587, 2476.9930672047553, 2144.997689068252, 1813.0023109317483, 1481.0069327952447, 1149.0115546587413],
                "quantile5": [1987, 1982, 1976, 1964],
                "quantile7": [1990, 1985, 1981, 1977, 1971, 1958],
                "quantile9": [1991, 1987, 1983, 1981, 1978, 1973, 1966, 1955],
                "quantile11": [1993, 1988, 1985, 1983, 1980, 1978, 1974, 1970, 1962, 1949],
                "min": 0,
                "max": 2004,
                "mean": 1919.336,
                "median": 1979,
                "stddev": 331.99537813650346,
                "sample": []
            }
        },
        "pop": {
            "bg": {
                "ckmeans5": [5920, 3045, 1901, 1106],
                "ckmeans7": [926, 1503, 2204, 3045, 4401, 8552],
                "ckmeans9": [8552, 5328, 3816, 2971, 2280, 1675, 1168, 748],
                "stddev7": [2686.790506547409, 2200.860337698273, 1714.9301688491364, 1229, 743.0698311508636, 257.1396623017272, -228.79050654740922],
                "stddev8": [3658.650844245682, 2686.790506547409, 1714.9301688491364, 743.0698311508636, -228.79050654740922, -1200.650844245682],
                "quantile5": [2125.5, 1423, 1054, 793.5],
                "quantile7": [2447, 1788, 1348, 1100, 900, 714],
                "quantile9": [2632, 2022, 1618, 1310, 1129, 971, 814, 662],
                "quantile11": [2739, 2213, 1859, 1524, 1286, 1145, 1009, 884, 768, 624],
                "min": 0,
                "max": 8886,
                "mean": 1495.753,
                "median": 1229,
                "stddev": 971.8603376982728,
                "sample": []
            },
            "county": {
                "ckmeans5": [9974203, 3086331, 1279668, 360990],
                "ckmeans7": [177026, 596684, 1359074, 2600861, 5227827, 9974203],
                "ckmeans9": [9974203, 5227827, 3086331, 1815269, 1200241, 682108, 360990, 115954],
                "stddev7": [727282.3524879827, 494249.06832532183, 261215.78416266092, 28182.5, -204850.78416266092, -437884.06832532183, -670917.3524879827],
                "stddev8": [1193348.9208133046, 727282.3524879827, 261215.78416266092, -204850.78416266092, -670917.3524879827, -1136983.9208133046],
                "quantile5": [119712.5, 39534.5, 20341, 10681.5],
                "quantile7": [194868, 70118, 36413, 22041, 14478, 8297],
                "quantile9": [256802, 106622, 52782, 34280, 22800, 16627, 11675, 6857],
                "quantile11": [307888, 140918, 74918, 45987, 33216, 23955, 18014, 13938, 9662, 5906],
                "min": 73,
                "max": 9974203,
                "mean": 136092.338,
                "median": 28182.5,
                "stddev": 466066.56832532183,
                "sample": []
            },
            "state": {
                "ckmeans5": [38066920, 19361792, 8185131, 3592053],
                "ckmeans7": [2761584, 5197580, 8874374, 19361792, 26092033, 38066920],
                "ckmeans9": [38066920, 26092033, 19361792, 11560380, 8185131, 5724692, 4383272, 2761584],
                "stddev7": [14423549.584494209, 10996302.222996138, 7569054.861498069, 4141807.5, 714560.1385019305, -2712687.222996139, -6139934.584494209],
                "stddev8": [21278044.30749035, 14423549.584494209, 7569054.861498069, 714560.1385019305, -6139934.584494209, -12994429.307490349],
                "quantile5": [8874374, 5383661, 2984345, 1328535],
                "quantile7": [9907756, 6561516, 4817678, 3592053, 1855617, 1006370],
                "quantile9": [12758729, 8185131, 6028076, 4727273, 3638965, 2858111, 1392704, 834708],
                "quantile11": [12868747, 9750405, 6561516, 5887776, 4727273, 3638965, 2882946, 1855617, 1321069, 728300],
                "min": 575251,
                "max": 38066920,
                "mean": 6110500.942307692,
                "median": 4141807.5,
                "stddev": 6854494.722996139,
                "sample": []
            },
            "tract": {
                "ckmeans5": [6638, 5008, 3687, 2438],
                "ckmeans7": [1850, 2773, 3728, 4725, 5870, 7544],
                "ckmeans9": [7701, 6229, 5246, 4462, 3728, 3020, 2323, 1466],
                "stddev7": [6073.00717916289, 5244.004786108593, 4415.002393054297, 3586, 2756.9976069457034, 1927.9952138914068, 1098.9928208371102],
                "stddev8": [7731.011965271483, 6073.00717916289, 4415.002393054297, 2756.9976069457034, 1098.9928208371102, -559.011965271483],
                "quantile5": [5189, 4107, 3191, 2400],
                "quantile7": [5618, 4637, 3956, 3279, 2793, 2139],
                "quantile9": [5929, 5023, 4376, 3870, 3368, 2941, 2514, 1990],
                "quantile11": [6200, 5300, 4705, 4273, 3830, 3399, 3074, 2712, 2296, 1872],
                "min": 0,
                "max": 11771,
                "mean": 3836.329,
                "median": 3586,
                "stddev": 1658.0047861085932,
                "sample": []
            },
            "place": {
                "ckmeans5": [1490758, 211655, 81025, 18898],
                "ckmeans7": [7348, 27339, 81025, 211655, 298178, 1490758],
                "ckmeans9": [1490758, 298178, 211655, 124250, 81025, 39059, 18898, 5671],
                "stddev7": [74819.68602186807, 50084.457347912044, 25349.228673956022, 614, -24121.228673956022, -48856.457347912044, -73591.68602186807],
                "stddev8": [124290.14336978011, 74819.68602186807, 25349.228673956022, -24121.228673956022, -73591.68602186807, -123062.14336978011],
                "quantile5": [3777, 1049, 408, 131],
                "quantile7": [6364, 2286, 932, 457, 214, 84],
                "quantile9": [8728, 3273, 1614, 872, 488, 288, 150, 63],
                "quantile11": [11342, 4166, 2488, 1356, 817, 514, 345, 208, 115, 51],
                "min": 0,
                "max": 1490758,
                "mean": 5949.696,
                "median": 614,
                "stddev": 49470.457347912044,
                "sample": []
            }
        }
    },
    "acs1115": {
        "mhi": {
            "county": {
                "ckmeans5": [76101, 59392, 47468, 38159],
                "ckmeans7": [34974, 42168, 49179, 57993, 68838, 83700],
                "ckmeans9": [89860, 75619, 63628, 55247, 48817, 43073, 37321, 30468],
                "stddev7": [63840.39200250614, 57393.09466833743, 50945.79733416872, 44498.5, 38051.20266583128, 31603.905331662572, 25156.60799749386],
                "stddev8": [76734.98667084357, 63840.39200250614, 50945.79733416872, 38051.20266583128, 25156.60799749386, 12262.01332915643],
                "quantile5": [54191, 47318, 42223, 36654],
                "quantile7": [58228, 51092, 46495, 42905, 39285, 35000],
                "quantile9": [62372, 53379, 49227, 45965, 43355, 40561, 37653, 33965],
                "quantile11": [65670, 55432, 51387, 48225, 45751, 43586, 41268, 38955, 36289, 32819],
                "min": 19501,
                "max": 110238,
                "mean": 46888.278,
                "median": 44498.5,
                "stddev": 12894.594668337428,
                "sample": []
            },
            "state": {
                "ckmeans5": [66779, 56852, 49255, 39665],
                "ckmeans7": [39665, 46868, 50957, 56852, 65015, 69515],
                "ckmeans9": [69515, 65015, 58840, 55176, 50957, 46868, 43623, 39665],
                "stddev7": [67906.3385694381, 62804.559046292066, 57702.77952314603, 52601, 47499.22047685397, 42397.440953707934, 37295.66143056191],
                "stddev8": [78109.89761573015, 67906.3385694381, 57702.77952314603, 47499.22047685397, 37295.66143056191, 27092.10238426984],
                "quantile5": [61492, 55176, 49620, 46868],
                "quantile7": [66779, 60509, 53357, 50957, 47583, 45047],
                "quantile9": [69515, 61062, 57574, 53207, 51243, 49331, 46879, 43740],
                "quantile11": [70331, 61818, 60509, 57181, 53207, 51243, 49429, 47583, 45483, 43623],
                "min": 19350,
                "max": 74551,
                "mean": 53957.519230769234,
                "median": 52601,
                "stddev": 10203.559046292063,
                "sample": []
            },
            "tract": {
                "ckmeans5": [175048, 110208, 73784, 45809],
                "ckmeans7": [31250, 49338, 67596, 90500, 123456, 185641],
                "ckmeans9": [185641, 132344, 103273, 83900, 67773, 53690, 39375, 19271],
                "stddev7": [109577.70305538282, 92126.30203692187, 74674.90101846094, 57223.5, 39772.098981539064, 22320.69796307812, 4869.296944617177],
                "stddev8": [144480.5050923047, 109577.70305538282, 74674.90101846094, 39772.098981539064, 4869.296944617177, -30033.505092304695],
                "quantile5": [86180.5, 64382, 51255.5, 38977.5],
                "quantile7": [96058, 75625, 62209, 52727, 44783, 35326],
                "quantile9": [102455, 82750, 70238, 61469, 53407, 47500, 40750, 32366],
                "quantile11": [107266, 89097, 76902, 67888, 60571, 54224, 48983, 43990, 37877, 30023],
                "min": 0,
                "max": 250001,
                "mean": 64728.771,
                "median": 57223.5,
                "stddev": 34902.80203692188,
                "sample": []
            },
            "place": {
                "ckmeans5": [154018, 77127, 49286, 19792],
                "ckmeans7": [14177, 34583, 49442, 67164, 91779, 169375],
                "ckmeans9": [207500, 119423, 92462, 75417, 60887, 47065, 34000, 14177],
                "stddev7": [90750.2871396358, 76140.02475975719, 61529.76237987859, 46919.5, 32309.237620121403, 17698.975240242806, 3088.712860364205],
                "stddev8": [119970.81189939298, 90750.2871396358, 61529.76237987859, 32309.237620121403, 3088.712860364205, -26131.811899392982],
                "quantile5": [70948.5, 53750, 41250, 30854],
                "quantile7": [78500, 62969, 51591, 42344, 36250, 24792],
                "quantile9": [82250, 68929, 58594, 50614, 43250, 38750, 32083, 20000],
                "quantile11": [85384, 72692, 63691, 56071, 50000, 43750, 40000, 35659, 29063, 0],
                "min": 0,
                "max": 250001,
                "mean": 49904.696,
                "median": 46919.5,
                "stddev": 29220.524759757194,
                "sample": []
            },
            "bg": {
                "ckmeans5": [62013, 45325, 32738, 17153],
                "ckmeans7": [11436, 25993, 35720, 45325, 56573, 73092],
                "ckmeans9": [76042, 61544, 52532, 45000, 37548, 30541, 22850, 11436],
                "stddev7": [62712.14721896483, 54849.43147930989, 46986.715739654945, 39124, 31261.284260345055, 23398.568520690114, 15535.852781035173],
                "stddev8": [78437.57869827471, 62712.14721896483, 46986.715739654945, 31261.284260345055, 15535.852781035173, -189.57869827471586],
                "quantile5": [51453.5, 42502, 35500, 27291.5],
                "quantile7": [54875, 47850, 41276, 36534, 31351, 24458],
                "quantile9": [57039, 50714, 45524, 41029, 36887, 32853, 28854, 22333],
                "quantile11": [59333, 52045, 48279, 43917, 40714, 37353, 34167, 31029, 26654, 20588],
                "min": 0,
                "max": 97917,
                "mean": 39621.727,
                "median": 39124,
                "stddev": 15725.431479309886,
                "sample": []
            }
        },
        "mhv": {
            "county": {
                "ckmeans5": [543100, 319200, 192800, 116900],
                "ckmeans7": [101400, 146700, 208200, 295000, 416000, 620700],
                "ckmeans9": [698600, 509700, 416000, 308400, 233400, 177700, 134200, 96300],
                "stddev7": [250863.60695476955, 204975.73796984635, 159087.86898492317, 113200, 67312.13101507683, 21424.262030153637, -24463.60695476955],
                "stddev8": [342639.3449246159, 250863.60695476955, 159087.86898492317, 67312.13101507683, -24463.60695476955, -116239.3449246159],
                "quantile5": [175450, 126750, 99400, 81750],
                "quantile7": [203300, 152400, 122700, 102700, 87300, 76300],
                "quantile9": [228500, 167700, 140300, 121200, 105500, 92600, 83300, 72700],
                "quantile11": [246600, 185900, 155700, 133800, 119800, 107300, 95400, 86200, 80700, 69400],
                "min": 0,
                "max": 815100,
                "mean": 140324.7,
                "median": 113200,
                "stddev": 91775.73796984636,
                "sample": []
            },
            "state": {
                "ckmeans5": [475800, 315900, 215900, 153800],
                "ckmeans7": [153800, 215900, 259500, 315900, 385500, 475800],
                "ckmeans9": [475800, 385500, 315900, 270500, 231500, 186200, 153800, 129200],
                "stddev7": [296858.94711092615, 253205.96474061743, 209552.98237030872, 165900, 122247.01762969128, 78594.03525938255, 34941.05288907382],
                "stddev8": [384164.9118515436, 296858.94711092615, 209552.98237030872, 122247.01762969128, 34941.05288907382, -52364.91185154361],
                "quantile5": [247800, 186200, 153800, 129900],
                "quantile7": [270500, 237300, 173800, 159000, 138400, 124200],
                "quantile9": [286900, 245000, 215900, 173700, 160300, 142100, 132000, 122400],
                "quantile11": [315900, 250000, 237300, 194800, 173700, 160300, 144100, 138400, 129200, 120500],
                "min": 103100,
                "max": 515300,
                "mean": 196107.6923076923,
                "median": 165900,
                "stddev": 87305.96474061745,
                "sample": []
            },
            "tract": {
                "ckmeans5": [1293800, 646600, 360600, 181800],
                "ckmeans7": [139200, 264000, 418500, 656900, 1036400, 1573500],
                "ckmeans9": [1724600, 1208300, 757800, 544600, 385300, 280800, 198400, 111800],
                "stddev7": [593999.8880869956, 469666.5920579971, 345333.29602899856, 221000, 96666.70397100145, -27666.5920579971, -151999.88808699563],
                "stddev8": [842666.4801449927, 593999.8880869956, 345333.29602899856, 96666.70397100145, -151999.88808699563, -400666.4801449927],
                "quantile5": [363050, 249600, 193800, 131300],
                "quantile7": [446400, 298100, 237300, 200000, 164000, 103400],
                "quantile9": [495800, 340300, 270800, 231600, 204100, 172300, 144400, 87400],
                "quantile11": [578400, 386300, 307000, 259900, 229500, 206100, 182100, 159000, 123100, 80000],
                "min": 0,
                "max": 2000001,
                "mean": 280503.204,
                "median": 221000,
                "stddev": 248666.5920579971,
                "sample": []
            },
            "place": {
                "ckmeans5": [1400900, 731000, 355500, 142800],
                "ckmeans7": [56000, 157300, 306300, 505200, 792400, 1400900],
                "ckmeans9": [1602300, 1106500, 731000, 505200, 338600, 212500, 130100, 49400],
                "stddev7": [464343.3253366459, 356428.8835577639, 248514.44177888194, 140600, 32685.558221118044, -75228.88355776391, -183143.32533664588],
                "stddev8": [680172.2088944098, 464343.3253366459, 248514.44177888194, 32685.558221118044, -183143.32533664588, -398972.2088944098],
                "quantile5": [270650, 172900, 108300, 65250],
                "quantile7": [355500, 222500, 165700, 115600, 83900, 40800],
                "quantile9": [414400, 252600, 200700, 162500, 119400, 92900, 70900, 0],
                "quantile11": [463200, 290500, 225000, 186900, 160200, 120500, 100000, 81600, 59400, 0],
                "min": 0,
                "max": 2000001,
                "mean": 196868.698,
                "median": 140600,
                "stddev": 215828.8835577639,
                "sample": []
            },
            "bg": {
                "ckmeans5": [239200, 141500, 93600, 42800],
                "ckmeans7": [32000, 72900, 103200, 140100, 197800, 310300],
                "ckmeans9": [368100, 247600, 185700, 143800, 115900, 91800, 67200, 28900],
                "stddev7": [177063.42579047626, 150208.95052698418, 123354.47526349209, 96500, 69645.52473650791, 42791.04947301582, 15936.574209523722],
                "stddev8": [230772.37631746047, 177063.42579047626, 123354.47526349209, 69645.52473650791, 15936.574209523722, -37772.37631746047],
                "quantile5": [141900, 108900, 85950, 67250],
                "quantile7": [153700, 122700, 104500, 88600, 76600, 59400],
                "quantile9": [161200, 135300, 117300, 102500, 90000, 80300, 69500, 55500],
                "quantile11": [168400, 146400, 125500, 113200, 101100, 90700, 82400, 75600, 64300, 48800],
                "min": 0,
                "max": 452900,
                "mean": 104142.7,
                "median": 96500,
                "stddev": 53708.95052698418,
                "sample": []
            }
        },
        "mfi": {
            "state": {
                "ckmeans5": [80778, 68817, 60809, 49274],
                "ckmeans7": [49274, 59410, 65237, 70720, 77055, 84232],
                "ckmeans9": [87085, 81726, 77055, 70720, 65237, 59410, 55049, 49274],
                "stddev7": [83985.3261082081, 77927.88407213874, 71870.44203606938, 65813, 59755.55796393063, 53698.11592786126, 47640.67389179189],
                "stddev8": [96100.21018034685, 83985.3261082081, 71870.44203606938, 59755.55796393063, 47640.67389179189, 35525.78981965315],
                "quantile5": [74826, 68817, 62247, 57504],
                "quantile7": [80778, 73194, 68064, 62717, 59410, 56110],
                "quantile9": [84232, 74708, 71546, 67466, 62817, 60916, 57573, 55341],
                "quantile11": [85321, 77055, 73194, 70720, 67466, 62817, 61119, 59410, 57144, 55049],
                "min": 22976,
                "max": 90089,
                "mean": 66550.73076923077,
                "median": 65813,
                "stddev": 12114.884072138739,
                "sample": []
            },
            "county": {
                "ckmeans5": [91077, 72000, 58116, 47636],
                "ckmeans7": [44257, 52120, 59659, 68485, 80067, 94850],
                "ckmeans9": [108637, 91077, 78500, 68485, 60544, 53880, 47237, 40055],
                "stddev7": [77545.53998956928, 70302.69332637952, 63059.84666318976, 55817, 48574.15333681024, 41331.306673620486, 34088.460010430725],
                "stddev8": [92031.23331594879, 77545.53998956928, 63059.84666318976, 48574.15333681024, 34088.460010430725, 19602.76668405121],
                "quantile5": [66222, 58567.5, 52448, 46158.5],
                "quantile7": [70498, 62441, 57574, 53348, 48929, 44079],
                "quantile9": [75179, 65239, 60900, 57046, 54095, 50407, 46938, 42668],
                "quantile11": [78500, 67188, 63125, 59926, 56838, 54478, 51345, 48706, 45597, 41909],
                "min": 27021,
                "max": 128504,
                "mean": 57762.078,
                "median": 55817,
                "stddev": 14485.693326379516,
                "sample": []
            },
            "tract": {
                "ckmeans5": [171083, 108618, 72904, 45063],
                "ckmeans7": [37450, 60938, 83750, 110868, 153523, 211974],
                "ckmeans9": [222569, 171083, 130574, 103426, 82652, 63913, 45313, 20859],
                "stddev7": [134968.76107967907, 112414.84071978607, 89860.92035989303, 67307, 44753.07964010697, 22199.159280213942, -354.7610796790832],
                "stddev8": [180076.60179946513, 134968.76107967907, 89860.92035989303, 44753.07964010697, -354.7610796790832, -45462.60179946515],
                "quantile5": [99629.5, 76035.5, 59337.5, 45554.5],
                "quantile7": [114688, 88672, 73515, 61333, 51985, 40449],
                "quantile9": [123800, 95820, 81750, 71667, 62679, 55110, 47642, 36875],
                "quantile11": [137857, 103500, 90107, 79013, 71250, 63417, 57128, 51026, 44019, 34353],
                "min": 0,
                "max": 250001,
                "mean": 77450.847,
                "median": 67307,
                "stddev": 45107.84071978606,
                "sample": []
            },
            "place": {
                "ckmeans5": [208125, 90482, 58578, 24028],
                "ckmeans7": [18819, 46563, 66737, 90139, 121250, 208125],
                "ckmeans9": [208125, 124693, 97328, 79076, 63438, 49821, 36964, 17143],
                "stddev7": [107073.14058120656, 89969.59372080438, 72866.04686040219, 55762.5, 38658.95313959781, 21555.406279195624, 4451.859418793436],
                "stddev8": [141280.23430201094, 107073.14058120656, 72866.04686040219, 38658.95313959781, 4451.859418793436, -29755.23430201094],
                "quantile5": [83535.5, 63009, 50220, 34705],
                "quantile7": [91083, 73036, 60909, 51667, 42093, 25625],
                "quantile9": [98393, 80263, 68875, 59667, 52261, 45625, 37031, 0],
                "quantile11": [101675, 85273, 73750, 65833, 59219, 53051, 47647, 41250, 32727, 0],
                "min": 0,
                "max": 250001,
                "mean": 57615.39,
                "median": 55762.5,
                "stddev": 34207.093720804376,
                "sample": []
            },
            "bg": {
                "ckmeans5": [13, 10, 7, 4],
                "ckmeans7": [3, 5, 7, 9, 11, 13],
                "ckmeans9": [14, 13, 12, 11, 9, 7, 5, 3],
                "stddev7": [13.546693311223912, 11.531128874149275, 9.515564437074637, 7.5, 5.484435562925363, 3.4688711258507254, 1.4533066887760882],
                "stddev8": [17.577822185373186, 13.546693311223912, 9.515564437074637, 5.484435562925363, 1.4533066887760882, -2.5778221853731864],
                "quantile5": [12, 9, 6, 3],
                "quantile7": [13, 11, 9, 6, 4, 3],
                "quantile9": [13, 11, 10, 8, 7, 5, 4, 2],
                "quantile11": [13, 12, 11, 9, 8, 7, 6, 4, 3, 2],
                "min": 1,
                "max": 0,
                "mean": 7.5,
                "median": 7.5,
                "stddev": 4.031128874149275,
                "sample": []
            }
        },
        "pci": {
            "state": {
                "ckmeans5": [47675, 34152, 29291, 21057],
                "ckmeans7": [21057, 25737, 29291, 31762, 36582, 47675],
                "ckmeans9": [47675, 36582, 33236, 31118, 29291, 26381, 24604, 21057],
                "stddev7": [35686.102263118984, 33013.901508745985, 30341.700754372992, 27669.5, 24997.299245627008, 22325.09849125401, 19652.89773688102],
                "stddev8": [41030.50377186497, 35686.102263118984, 30341.700754372992, 24997.299245627008, 19652.89773688102, 14308.49622813503],
                "quantile5": [32157, 29291, 26607, 24981],
                "quantile7": [33413, 30554, 27950, 26829, 25737, 24091],
                "quantile9": [34362, 32035, 29894, 27882, 26953, 26259, 25032, 24012],
                "quantile11": [36582, 32217, 30554, 29822, 27882, 26953, 26381, 25737, 24686, 23450],
                "min": 11394,
                "max": 47675,
                "mean": 28531.884615384617,
                "median": 27669.5,
                "stddev": 5344.4015087459875,
                "sample": []
            },
            "county": {
                "ckmeans5": [43880, 32021, 25348, 20439],
                "ckmeans7": [18533, 22093, 25389, 29362, 34742, 45500],
                "ckmeans9": [45500, 36809, 32271, 28460, 25303, 22421, 19660, 16242],
                "stddev7": [32275.865111800013, 29205.91007453334, 26135.95503726667, 23066, 19996.04496273333, 16926.08992546666, 13856.134888199986],
                "stddev8": [38415.775186333354, 32275.865111800013, 26135.95503726667, 19996.04496273333, 13856.134888199986, 7716.224813666644],
                "quantile5": [27813, 24264, 21767.5, 19507],
                "quantile7": [29821, 26005, 23981, 22134, 20534, 18619],
                "quantile9": [31056, 27317, 25176, 23718, 22368, 21101, 19726, 18082],
                "quantile11": [32724, 28209, 26227, 24669, 23630, 22547, 21385, 20353, 19194, 17746],
                "min": 8292,
                "max": 60236,
                "mean": 24105.762,
                "median": 23066,
                "stddev": 6139.910074533343,
                "sample": []
            },
            "tract": {
                "ckmeans5": [115128, 67807, 40799, 24707],
                "ckmeans7": [17605, 27491, 38637, 55283, 79766, 115128],
                "ckmeans9": [125359, 87803, 67807, 51870, 40058, 31536, 23919, 15411],
                "stddev7": [60217.93346599988, 49695.955643999914, 39173.97782199996, 28652, 18130.022178000043, 7608.044356000082, -2913.9334659998785],
                "stddev8": [81261.88910999979, 60217.93346599988, 39173.97782199996, 18130.022178000043, -2913.9334659998785, -23957.889109999793],
                "quantile5": [42694, 31745, 25400.5, 19614],
                "quantile7": [48700, 36586, 30651, 26219, 21972, 17777],
                "quantile9": [55848, 40973, 34567, 30089, 26780, 23278, 20359, 16309],
                "quantile11": [61679, 44326, 37394, 33367, 29855, 27166, 24355, 21606, 18841, 15089],
                "min": 0,
                "max": 184442,
                "mean": 33643.558,
                "median": 28652,
                "stddev": 21043.955643999918,
                "sample": []
            },
            "place": {
                "ckmeans5": [66415, 37603, 24656, 13610],
                "ckmeans7": [9012, 19240, 28172, 39979, 60827, 96767],
                "ckmeans9": [96767, 60827, 42350, 32846, 25929, 19978, 14055, 5939],
                "stddev7": [45195.2502946707, 37795.50019644713, 30395.750098223565, 22996, 15596.249901776433, 8196.499803552866, 796.7497053292973],
                "stddev8": [59994.75049111783, 45195.2502946707, 30395.750098223565, 15596.249901776433, 796.7497053292973, -14002.750491117833],
                "quantile5": [33184.5, 25612, 20836.5, 15613],
                "quantile7": [37603, 29771, 24917, 21292, 18159, 13464],
                "quantile9": [40284, 31900, 27386, 24454, 21635, 19199, 16250, 11782],
                "quantile11": [43612, 34594, 30387, 26579, 24094, 21920, 20004, 17635, 15045, 10899],
                "min": 0,
                "max": 151037,
                "mean": 25404.731,
                "median": 22996,
                "stddev": 14799.500196447134,
                "sample": []
            },
            "bg": {
                "ckmeans5": [35610, 26108, 20159, 14255],
                "ckmeans7": [12620, 17406, 21174, 25491, 31344, 41507],
                "ckmeans9": [45753, 35610, 29115, 24545, 20773, 17362, 13241, 6111],
                "stddev7": [30760.92958745656, 27277.286391637706, 23793.643195818855, 20310, 16826.356804181145, 13342.713608362294, 9859.070412543439],
                "stddev8": [37728.21597909427, 30760.92958745656, 23793.643195818855, 16826.356804181145, 9859.070412543439, 2891.784020905732],
                "quantile5": [25782.5, 21857.5, 18846.5, 15980.5],
                "quantile7": [27802, 23698, 21461, 19273, 17272, 14926],
                "quantile9": [28759, 25070, 22829, 21151, 19540, 18045, 16247, 13834],
                "quantile11": [30054, 26343, 23900, 22398, 21027, 19684, 18362, 17082, 15688, 12932],
                "min": 0,
                "max": 56743,
                "mean": 21082.97,
                "median": 20310,
                "stddev": 6967.286391637707,
                "sample": []
            }
        },
        "myb": {
            "county": {
                "ckmeans5": [1986, 1977, 1965, 1939],
                "ckmeans7": [1939, 1958, 1968, 1976, 1982, 1989],
                "ckmeans9": [1990, 1984, 1979, 1974, 1968, 1961, 1953, 1939],
                "stddev7": [2073.279558110594, 2041.5197054070625, 2009.7598527035314, 1978, 1946.2401472964686, 1914.4802945929375, 1882.7204418894062],
                "stddev8": [2136.7992635176565, 2073.279558110594, 2009.7598527035314, 1946.2401472964686, 1882.7204418894062, 1819.2007364823437],
                "quantile5": [1986, 1980, 1975, 1966],
                "quantile7": [1988, 1983, 1980, 1976, 1972, 1962],
                "quantile9": [1989, 1985, 1982, 1979, 1977, 1973, 1968, 1959],
                "quantile11": [1991, 1986, 1984, 1981, 1979, 1977, 1974, 1971, 1965, 1958],
                "min": 0,
                "max": 2002,
                "mean": 1974.205,
                "median": 1978,
                "stddev": 63.51970540706254,
                "sample": []
            },
            "state": {
                "ckmeans5": [1984, 1978, 1971, 1964],
                "ckmeans7": [1956, 1964, 1971, 1975, 1980, 1986],
                "ckmeans9": [1988, 1984, 1980, 1977, 1974, 1971, 1964, 1956],
                "stddev7": [1989.4966569438443, 1985.164437962563, 1980.8322189812814, 1976.5, 1972.1677810187186, 1967.835562037437, 1963.5033430561557],
                "stddev8": [1998.1610949064072, 1989.4966569438443, 1980.8322189812814, 1972.1677810187186, 1963.5033430561557, 1954.8389050935928],
                "quantile5": [1983, 1978, 1975, 1969],
                "quantile7": [1984, 1982, 1978, 1975, 1972, 1967],
                "quantile9": [1985, 1982, 1980, 1978, 1976, 1973, 1971, 1964],
                "quantile11": [1986, 1983, 1982, 1980, 1978, 1976, 1974, 1972, 1967, 1961],
                "min": 1951,
                "max": 1993,
                "mean": 1975.6538461538462,
                "median": 1976.5,
                "stddev": 8.664437962562863,
                "sample": []
            },
            "tract": {
                "ckmeans5": [1989, 1971, 1952, 1939],
                "ckmeans7": [1939, 1949, 1962, 1973, 1984, 1995],
                "ckmeans9": [1998, 1990, 1982, 1973, 1964, 1955, 1946, 1939],
                "stddev7": [2449.5257939432445, 2292.1838626288295, 2134.841931314415, 1977.5, 1820.1580686855852, 1662.8161373711705, 1505.4742060567555],
                "stddev8": [2764.209656572074, 2449.5257939432445, 2134.841931314415, 1820.1580686855852, 1505.4742060567555, 1190.790343427926],
                "quantile5": [1990, 1981.5, 1970, 1955],
                "quantile7": [1993, 1986, 1980, 1973, 1961, 1948],
                "quantile9": [1995, 1989, 1984, 1980, 1974, 1965, 1956, 1942],
                "quantile11": [1997, 1991, 1987, 1983, 1979, 1975, 1967, 1960, 1953, 1939],
                "min": 0,
                "max": 2006,
                "mean": 1922.801,
                "median": 1977.5,
                "stddev": 314.68386262882956,
                "sample": []
            },
            "place": {
                "ckmeans5": [1986, 1972, 1954, 1939],
                "ckmeans7": [1939, 1949, 1962, 1973, 1982, 1991],
                "ckmeans9": [1996, 1988, 1982, 1975, 1967, 1958, 1947, 1939],
                "stddev7": [2467.88915215169, 2304.759434767793, 2141.6297173838966, 1978.5, 1815.3702826161034, 1652.2405652322068, 1489.1108478483102],
                "stddev8": [2794.148586919483, 2467.88915215169, 2141.6297173838966, 1815.3702826161034, 1489.1108478483102, 1162.851413080517],
                "quantile5": [1988, 1982, 1975, 1959],
                "quantile7": [1990, 1985, 1981, 1976, 1968, 1955],
                "quantile9": [1992, 1987, 1984, 1980, 1977, 1971, 1963, 1950],
                "quantile11": [1993, 1988, 1985, 1983, 1980, 1977, 1973, 1967, 1958, 1945],
                "min": 0,
                "max": 2005,
                "mean": 1920.185,
                "median": 1978.5,
                "stddev": 326.25943476779327,
                "sample": []
            },
            "bg": {
                "ckmeans5": [1988, 1978, 1964, 1939],
                "ckmeans7": [1939, 1955, 1967, 1976, 1983, 1991],
                "ckmeans9": [1996, 1989, 1983, 1977, 1970, 1962, 1952, 1939],
                "stddev7": [2169.251456434603, 2106.500970956402, 2043.750485478201, 1981, 1918.249514521799, 1855.4990290435978, 1792.7485435653969],
                "stddev8": [2294.7524273910053, 2169.251456434603, 2043.750485478201, 1918.249514521799, 1792.7485435653969, 1667.2475726089947],
                "quantile5": [1989, 1984, 1978, 1971],
                "quantile7": [1991, 1987, 1983, 1979, 1975, 1966],
                "quantile9": [1992, 1988, 1986, 1983, 1979, 1976, 1972, 1964],
                "quantile11": [1993, 1990, 1987, 1985, 1982, 1980, 1977, 1974, 1970, 1961],
                "min": 0,
                "max": 2004,
                "mean": 1971.483,
                "median": 1981,
                "stddev": 125.50097095640207,
                "sample": []
            }
        },
        "pop": {
            "state": {
                "ckmeans5": [38421464, 19645772, 8256630, 3583073],
                "ckmeans7": [2798636, 5278906, 8904413, 19645772, 26538614, 38421464],
                "ckmeans9": [38421464, 26538614, 19645772, 11575977, 8256630, 5742117, 4397353, 2798636],
                "stddev7": [14556441.02890336, 11093725.019268908, 7631009.009634454, 4168293, 705576.9903655467, -2757139.0192689067, -6219855.02890336],
                "stddev8": [21481873.048172265, 14556441.02890336, 7631009.009634454, 705576.9903655467, -6219855.02890336, -13145287.048172265],
                "quantile5": [8904413, 5419171, 2988081, 1329100],
                "quantile7": [10006693, 6641928, 4830620, 3583073, 1869365, 1014699],
                "quantile9": [12779559, 8256630, 6045448, 4777576, 3593222, 2892987, 1406299, 843190],
                "quantile11": [12873761, 9845333, 6641928, 5930538, 4777576, 3593222, 2903379, 1869365, 1324201, 733375],
                "min": 579679,
                "max": 38421464,
                "mean": 6155732.576923077,
                "median": 4168293,
                "stddev": 6925432.019268907,
                "sample": []
            },
            "county": {
                "ckmeans5": [10038388, 3116069, 1302884, 363453],
                "ckmeans7": [145046, 524886, 1229039, 2298032, 4018143, 10038388],
                "ckmeans9": [10038388, 5236393, 3116069, 1843152, 1229039, 702898, 363453, 116648],
                "stddev7": [732322.5805270158, 497084.05368467723, 261845.52684233862, 26607, -208631.52684233862, -443870.05368467723, -679108.5805270158],
                "stddev8": [1202799.634211693, 732322.5805270158, 261845.52684233862, -208631.52684233862, -679108.5805270158, -1149585.634211693],
                "quantile5": [115807.5, 37454.5, 18916, 9362.5],
                "quantile7": [183753, 67081, 34332, 21110, 13502, 7315],
                "quantile9": [248966, 101960, 49146, 32835, 22001, 15807, 10300, 5939],
                "quantile11": [300870, 136520, 72124, 43382, 32358, 22648, 17002, 12936, 8769, 5245],
                "min": 85,
                "max": 10038388,
                "mean": 133616.608,
                "median": 26607,
                "stddev": 470477.05368467723,
                "sample": []
            },
            "tract": {
                "ckmeans5": [8546, 5832, 4111, 2537],
                "ckmeans7": [1820, 3040, 4182, 5390, 6830, 9183],
                "ckmeans9": [10887, 8373, 6575, 5334, 4316, 3386, 2513, 1355],
                "stddev7": [6965.391857715, 5976.094571809999, 4986.797285905, 3997.5, 3008.2027140950004, 2018.9054281900003, 1029.6081422850002],
                "stddev8": [8943.986429524999, 6965.391857715, 4986.797285905, 3008.2027140950004, 1029.6081422850002, -948.986429524999],
                "quantile5": [5655.5, 4556.5, 3503, 2568],
                "quantile7": [6126, 5081, 4408, 3631, 2993, 2219],
                "quantile9": [6471, 5447, 4872, 4332, 3708, 3204, 2701, 2060],
                "quantile11": [6901, 5807, 5194, 4725, 4255, 3762, 3347, 2949, 2442, 1921],
                "min": 0,
                "max": 14528,
                "mean": 4206.102,
                "median": 3997.5,
                "stddev": 1978.5945718099997,
                "sample": []
            },
            "place": {
                "ckmeans5": [647484, 299107, 83476, 19035],
                "ckmeans7": [5082, 19035, 45380, 124795, 299107, 647484],
                "ckmeans9": [647484, 299107, 200614, 124795, 71549, 38722, 17162, 4834],
                "stddev7": [43125.25031717116, 29031.50021144744, 14937.75010572372, 844, -13249.75010572372, -27343.50021144744, -41437.25031717116],
                "stddev8": [71312.7505286186, 43125.25031717116, 14937.75010572372, -13249.75010572372, -41437.25031717116, -69624.7505286186],
                "quantile5": [4526.5, 1549.5, 522.5, 153],
                "quantile7": [7320, 2630, 1251, 582, 258, 92],
                "quantile9": [8943, 3888, 2085, 1141, 616, 372, 169, 66],
                "quantile11": [11043, 5364, 2843, 1842, 1098, 661, 436, 238, 135, 51],
                "min": 0,
                "max": 647484,
                "mean": 5864.843,
                "median": 844,
                "stddev": 28187.50021144744,
                "sample": []
            },
            "bg": {
                "ckmeans5": [5086, 2566, 1699, 1048],
                "ckmeans7": [853, 1285, 1808, 2509, 3871, 7232],
                "ckmeans9": [7232, 3871, 2724, 2129, 1699, 1329, 1009, 704],
                "stddev7": [2342.9562129270353, 1960.804141951357, 1578.6520709756785, 1196.5, 814.3479290243215, 432.1958580486431, 50.04378707296473],
                "stddev8": [3107.2603548783923, 2342.9562129270353, 1578.6520709756785, 814.3479290243215, 50.04378707296473, -714.2603548783923],
                "quantile5": [1826, 1365.5, 1062, 794],
                "quantile7": [2046, 1572, 1320, 1098, 909, 715],
                "quantile9": [2207, 1747, 1481, 1293, 1117, 969, 824, 655],
                "quantile11": [2292, 1912, 1604, 1427, 1276, 1134, 1018, 901, 766, 617],
                "min": 0,
                "max": 8167,
                "mean": 1360.186,
                "median": 1196.5,
                "stddev": 764.3041419513569,
                "sample": []
            }
        }
    }
};

var colortree = {

    "mh1_5": [
            "#edf8fb",
            "#b2e2e2",
            "#66c2a4",
            "#2ca25f",
            "#006d2c"
        ],
    "mh1_7": [
            "#edf8fb",
            "#ccece6",
            "#99d8c9",
            "#66c2a4",
            "#41ae76",
            "#238b45",
            "#005824"
        ],
    "mh1_9": [
            "#f7fcfd",
            "#e5f5f9",
            "#ccece6",
            "#99d8c9",
            "#66c2a4",
            "#41ae76",
            "#238b45",
            "#006d2c",
            "#00441b"
        ],

    "mh2_5": [
            "#edf8fb",
            "#b3cde3",
            "#8c96c6",
            "#8856a7",
            "#810f7c"
        ],

    "mh2_7": [
            "#edf8fb",
            "#bfd3e6",
            "#9ebcda",
            "#8c96c6",
            "#8c6bb1",
            "#88419d",
            "#6e016b"
        ],

    "mh2_9": [
            "#f7fcfd",
            "#e0ecf4",
            "#bfd3e6",
            "#9ebcda",
            "#8c96c6",
            "#8c6bb1",
            "#88419d",
            "#810f7c",
            "#4d004b"
        ],

    "mh3_5": [
            "#f0f9e8",
            "#bae4bc",
            "#7bccc4",
            "#43a2ca",
            "#0868ac"
        ],
    "mh3_7": [
            "#f0f9e8",
            "#ccebc5",
            "#a8ddb5",
            "#7bccc4",
            "#4eb3d3",
            "#2b8cbe",
            "#08589e"
        ],
    "mh3_9": [
            "#f7fcf0",
            "#e0f3db",
            "#ccebc5",
            "#a8ddb5",
            "#7bccc4",
            "#4eb3d3",
            "#2b8cbe",
            "#0868ac",
            "#084081"
        ],
    "mh4_5": [
            "#fef0d9",
            "#fdcc8a",
            "#fc8d59",
            "#e34a33",
            "#b30000"
        ],
    "mh4_7": [
            "#fef0d9",
            "#fdd49e",
            "#fdbb84",
            "#fc8d59",
            "#ef6548",
            "#d7301f",
            "#990000"
        ],
    "mh4_9": [
            "#fff7ec",
            "#fee8c8",
            "#fdd49e",
            "#fdbb84",
            "#fc8d59",
            "#ef6548",
            "#d7301f",
            "#b30000",
            "#7f0000"
        ],
    "mh5_5": [
            "#f1eef6",
            "#bdc9e1",
            "#74a9cf",
            "#2b8cbe",
            "#045a8d"
        ],
    "mh5_7": [
            "#f1eef6",
            "#d0d1e6",
            "#a6bddb",
            "#74a9cf",
            "#3690c0",
            "#0570b0",
            "#034e7b"
        ],
    "mh5_9": [
            "#fff7fb",
            "#ece7f2",
            "#d0d1e6",
            "#a6bddb",
            "#74a9cf",
            "#3690c0",
            "#0570b0",
            "#045a8d",
            "#023858"
        ],
    "mh6_5": [
            "#f6eff7",
            "#bdc9e1",
            "#67a9cf",
            "#1c9099",
            "#016c59"
        ],
    "mh6_7": [
            "#f6eff7",
            "#d0d1e6",
            "#a6bddb",
            "#67a9cf",
            "#3690c0",
            "#02818a",
            "#016450"
        ],
    "mh6_9": [
            "#fff7fb",
            "#ece2f0",
            "#d0d1e6",
            "#a6bddb",
            "#67a9cf",
            "#3690c0",
            "#02818a",
            "#016c59",
            "#014636"
        ],
    "mh7_5": [
            "#f1eef6",
            "#d7b5d8",
            "#df65b0",
            "#dd1c77",
            "#980043"
        ],
    "mh7_7": [
            "#f1eef6",
            "#d4b9da",
            "#c994c7",
            "#df65b0",
            "#e7298a",
            "#ce1256",
            "#91003f"
        ],
    "mh7_9": [
            "#f7f4f9",
            "#e7e1ef",
            "#d4b9da",
            "#c994c7",
            "#df65b0",
            "#e7298a",
            "#ce1256",
            "#980043",
            "#67001f"
        ],
    "mh8_5": [
            "#feebe2",
            "#fbb4b9",
            "#f768a1",
            "#c51b8a",
            "#7a0177"
        ],
    "mh8_7": [
            "#feebe2",
            "#fcc5c0",
            "#fa9fb5",
            "#f768a1",
            "#dd3497",
            "#ae017e",
            "#7a0177"
        ],
    "mh8_9": [
            "#fff7f3",
            "#fde0dd",
            "#fcc5c0",
            "#fa9fb5",
            "#f768a1",
            "#dd3497",
            "#ae017e",
            "#7a0177",
            "#49006a"
        ],
    "mh9_5": [
            "#ffffcc",
            "#c2e699",
            "#78c679",
            "#31a354",
            "#006837"
        ],
    "mh9_7": [
            "#ffffcc",
            "#d9f0a3",
            "#addd8e",
            "#78c679",
            "#41ab5d",
            "#238443",
            "#005a32"
        ],
    "mh9_9": [
            "#ffffe5",
            "#f7fcb9",
            "#d9f0a3",
            "#addd8e",
            "#78c679",
            "#41ab5d",
            "#238443",
            "#006837",
            "#004529"
        ],
    "mh10_5": [
            "#ffffcc",
            "#a1dab4",
            "#41b6c4",
            "#2c7fb8",
            "#253494"
        ],
    "mh10_7": [
            "#ffffcc",
            "#c7e9b4",
            "#7fcdbb",
            "#41b6c4",
            "#1d91c0",
            "#225ea8",
            "#0c2c84"
        ],
    "mh10_9": [
            "#ffffd9",
            "#edf8b1",
            "#c7e9b4",
            "#7fcdbb",
            "#41b6c4",
            "#1d91c0",
            "#225ea8",
            "#253494",
            "#081d58"
        ],
    "mh11_5": [
            "#ffffd4",
            "#fed98e",
            "#fe9929",
            "#d95f0e",
            "#993404"
        ],
    "mh11_7": [
            "#ffffd4",
            "#fee391",
            "#fec44f",
            "#fe9929",
            "#ec7014",
            "#cc4c02",
            "#8c2d04"
        ],
    "mh11_9": [
            "#ffffe5",
            "#fff7bc",
            "#fee391",
            "#fec44f",
            "#fe9929",
            "#ec7014",
            "#cc4c02",
            "#993404",
            "#662506"
        ],
    "mh12_5": [
            "#ffffb2",
            "#fecc5c",
            "#fd8d3c",
            "#f03b20",
            "#bd0026"
        ],
    "mh12_7": [
            "#ffffb2",
            "#fed976",
            "#feb24c",
            "#fd8d3c",
            "#fc4e2a",
            "#e31a1c",
            "#b10026"
        ],
    "mh12_9": [
            "#ffffcc",
            "#ffeda0",
            "#fed976",
            "#feb24c",
            "#fd8d3c",
            "#fc4e2a",
            "#e31a1c",
            "#bd0026",
            "#800026"
        ],
    "sh1_5": [
            "#eff3ff",
            "#bdd7e7",
            "#6baed6",
            "#3182bd",
            "#08519c"
        ],
    "sh1_7": [
            "#eff3ff",
            "#c6dbef",
            "#9ecae1",
            "#6baed6",
            "#4292c6",
            "#2171b5",
            "#084594"
        ],
    "sh1_9": [
            "#f7fbff",
            "#deebf7",
            "#c6dbef",
            "#9ecae1",
            "#6baed6",
            "#4292c6",
            "#2171b5",
            "#08519c",
            "#08306b"
        ],
    "sh2_5": [
            "#edf8e9",
            "#bae4b3",
            "#74c476",
            "#31a354",
            "#006d2c"
        ],
    "sh2_7": [
            "#edf8e9",
            "#c7e9c0",
            "#a1d99b",
            "#74c476",
            "#41ab5d",
            "#238b45",
            "#005a32"
        ],
    "sh2_9": [
            "#f7fcf5",
            "#e5f5e0",
            "#c7e9c0",
            "#a1d99b",
            "#74c476",
            "#41ab5d",
            "#238b45",
            "#006d2c",
            "#00441b"
        ],
    "sh3_5": [
            "#f7f7f7",
            "#cccccc",
            "#969696",
            "#636363",
            "#252525"
        ],
    "sh3_7": [
            "#f7f7f7",
            "#d9d9d9",
            "#bdbdbd",
            "#969696",
            "#737373",
            "#525252",
            "#252525"
        ],
    "sh3_9": [
            "#ffffff",
            "#f0f0f0",
            "#d9d9d9",
            "#bdbdbd",
            "#969696",
            "#737373",
            "#525252",
            "#252525",
            "#000000"
        ],
    "sh4_5": [
            "#feedde",
            "#fdbe85",
            "#fd8d3c",
            "#e6550d",
            "#a63603"
        ],
    "sh4_7": [
            "#feedde",
            "#fdd0a2",
            "#fdae6b",
            "#fd8d3c",
            "#f16913",
            "#d94801",
            "#8c2d04"
        ],
    "sh4_9": [
            "#fff5eb",
            "#fee6ce",
            "#fdd0a2",
            "#fdae6b",
            "#fd8d3c",
            "#f16913",
            "#d94801",
            "#a63603",
            "#7f2704"
        ],
    "sh5_5": [
            "#f2f0f7",
            "#cbc9e2",
            "#9e9ac8",
            "#756bb1",
            "#54278f"
        ],
    "sh5_7": [
            "#f2f0f7",
            "#dadaeb",
            "#bcbddc",
            "#9e9ac8",
            "#807dba",
            "#6a51a3",
            "#4a1486"
        ],
    "sh5_9": [
            "#fcfbfd",
            "#efedf5",
            "#dadaeb",
            "#bcbddc",
            "#9e9ac8",
            "#807dba",
            "#6a51a3",
            "#54278f",
            "#3f007d"
        ],
    "sh6_5": [
            "#fee5d9",
            "#fcae91",
            "#fb6a4a",
            "#de2d26",
            "#a50f15"
        ],
    "sh6_7": [
            "#fee5d9",
            "#fcbba1",
            "#fc9272",
            "#fb6a4a",
            "#ef3b2c",
            "#cb181d",
            "#99000d"
        ],
    "sh6_9": [
            "#fff5f0",
            "#fee0d2",
            "#fcbba1",
            "#fc9272",
            "#fb6a4a",
            "#ef3b2c",
            "#cb181d",
            "#a50f15",
            "#67000d"
        ],
    "ds1_5": [
            "#a6611a",
            "#dfc27d",
            "#f5f5f5",
            "#80cdc1",
            "#018571"
        ],
    "ds1_7": [
            "#8c510a",
            "#d8b365",
            "#f6e8c3",
            "#f5f5f5",
            "#c7eae5",
            "#5ab4ac",
            "#01665e"
        ],
    "ds1_8": [
            "#8c510a",
            "#bf812d",
            "#dfc27d",
            "#f6e8c3",
            "#c7eae5",
            "#80cdc1",
            "#35978f",
            "#01665e"
        ],
    "ds1_9": [
            "#8c510a",
            "#bf812d",
            "#dfc27d",
            "#f6e8c3",
            "#f5f5f5",
            "#c7eae5",
            "#80cdc1",
            "#35978f",
            "#01665e"
        ],
    "ds1_11": [
            "#543005",
            "#8c510a",
            "#bf812d",
            "#dfc27d",
            "#f6e8c3",
            "#f5f5f5",
            "#c7eae5",
            "#80cdc1",
            "#35978f",
            "#01665e",
            "#003c30"
        ],
    "ds2_5": [
            "#d01c8b",
            "#f1b6da",
            "#f7f7f7",
            "#b8e186",
            "#4dac26"
        ],
    "ds2_7": [
            "#c51b7d",
            "#e9a3c9",
            "#fde0ef",
            "#f7f7f7",
            "#e6f5d0",
            "#a1d76a",
            "#4d9221"
        ],
    "ds2_8": [
            "#c51b7d",
            "#de77ae",
            "#f1b6da",
            "#fde0ef",
            "#e6f5d0",
            "#b8e186",
            "#7fbc41",
            "#4d9221"
        ],
    "ds2_9": [
            "#c51b7d",
            "#de77ae",
            "#f1b6da",
            "#fde0ef",
            "#f7f7f7",
            "#e6f5d0",
            "#b8e186",
            "#7fbc41",
            "#4d9221"
        ],
    "ds2_11": [
            "#8e0152",
            "#c51b7d",
            "#de77ae",
            "#f1b6da",
            "#fde0ef",
            "#f7f7f7",
            "#e6f5d0",
            "#b8e186",
            "#7fbc41",
            "#4d9221",
            "#276419"
        ],
    "ds3_5": [
            "#7b3294",
            "#c2a5cf",
            "#f7f7f7",
            "#a6dba0",
            "#008837"
        ],
    "ds3_7": [
            "#762a83",
            "#af8dc3",
            "#e7d4e8",
            "#f7f7f7",
            "#d9f0d3",
            "#7fbf7b",
            "#1b7837"
        ],
    "ds3_8": [
            "#762a83",
            "#9970ab",
            "#c2a5cf",
            "#e7d4e8",
            "#d9f0d3",
            "#a6dba0",
            "#5aae61",
            "#1b7837"
        ],
    "ds3_9": [
            "#762a83",
            "#9970ab",
            "#c2a5cf",
            "#e7d4e8",
            "#f7f7f7",
            "#d9f0d3",
            "#a6dba0",
            "#5aae61",
            "#1b7837"
        ],
    "ds3_11": [
            "#40004b",
            "#762a83",
            "#9970ab",
            "#c2a5cf",
            "#e7d4e8",
            "#f7f7f7",
            "#d9f0d3",
            "#a6dba0",
            "#5aae61",
            "#1b7837",
            "#00441b"
        ],
    "ds4_5": [
            "#e66101",
            "#fdb863",
            "#f7f7f7",
            "#b2abd2",
            "#5e3c99"
        ],
    "ds4_7": [
            "#b35806",
            "#f1a340",
            "#fee0b6",
            "#f7f7f7",
            "#d8daeb",
            "#998ec3",
            "#542788"
        ],
    "ds4_8": [
            "#b35806",
            "#e08214",
            "#fdb863",
            "#fee0b6",
            "#d8daeb",
            "#b2abd2",
            "#8073ac",
            "#542788"
        ],
    "ds4_9": [
            "#b35806",
            "#e08214",
            "#fdb863",
            "#fee0b6",
            "#f7f7f7",
            "#d8daeb",
            "#b2abd2",
            "#8073ac",
            "#542788"
        ],
    "ds4_11": [
            "#7f3b08",
            "#b35806",
            "#e08214",
            "#fdb863",
            "#fee0b6",
            "#f7f7f7",
            "#d8daeb",
            "#b2abd2",
            "#8073ac",
            "#542788",
            "#2d004b"
        ],
    "ds5_5": [
            "#ca0020",
            "#f4a582",
            "#f7f7f7",
            "#92c5de",
            "#0571b0"
        ],
    "ds5_7": [
            "#b2182b",
            "#ef8a62",
            "#fddbc7",
            "#f7f7f7",
            "#d1e5f0",
            "#67a9cf",
            "#2166ac"
        ],
    "ds5_8": [
            "#b2182b",
            "#d6604d",
            "#f4a582",
            "#fddbc7",
            "#d1e5f0",
            "#92c5de",
            "#4393c3",
            "#2166ac"
        ],
    "ds5_9": [
            "#b2182b",
            "#d6604d",
            "#f4a582",
            "#fddbc7",
            "#f7f7f7",
            "#d1e5f0",
            "#92c5de",
            "#4393c3",
            "#2166ac"
        ],
    "ds5_11": [
            "#67001f",
            "#b2182b",
            "#d6604d",
            "#f4a582",
            "#fddbc7",
            "#f7f7f7",
            "#d1e5f0",
            "#92c5de",
            "#4393c3",
            "#2166ac",
            "#053061"
        ],
    "ds6_5": [
            "#ca0020",
            "#f4a582",
            "#ffffff",
            "#bababa",
            "#404040"
        ],
    "ds6_7": [
            "#b2182b",
            "#ef8a62",
            "#fddbc7",
            "#ffffff",
            "#e0e0e0",
            "#999999",
            "#4d4d4d"
        ],
    "ds6_8": [
            "#b2182b",
            "#d6604d",
            "#f4a582",
            "#fddbc7",
            "#e0e0e0",
            "#bababa",
            "#878787",
            "#4d4d4d"
        ],
    "ds6_9": [
            "#b2182b",
            "#d6604d",
            "#f4a582",
            "#fddbc7",
            "#ffffff",
            "#e0e0e0",
            "#bababa",
            "#878787",
            "#4d4d4d"
        ],
    "ds6_11": [
            "#67001f",
            "#b2182b",
            "#d6604d",
            "#f4a582",
            "#fddbc7",
            "#ffffff",
            "#e0e0e0",
            "#bababa",
            "#878787",
            "#4d4d4d",
            "#1a1a1a"
        ],
    "ds7_5": [
            "#d7191c",
            "#fdae61",
            "#ffffbf",
            "#abd9e9",
            "#2c7bb6"
        ],
    "ds7_7": [
            "#d73027",
            "#fc8d59",
            "#fee090",
            "#ffffbf",
            "#e0f3f8",
            "#91bfdb",
            "#4575b4"
        ],
    "ds7_8": [
            "#d73027",
            "#f46d43",
            "#fdae61",
            "#fee090",
            "#e0f3f8",
            "#abd9e9",
            "#74add1",
            "#4575b4"
        ],
    "ds7_9": [
            "#d73027",
            "#f46d43",
            "#fdae61",
            "#fee090",
            "#ffffbf",
            "#e0f3f8",
            "#abd9e9",
            "#74add1",
            "#4575b4"
        ],
    "ds7_11": [
            "#a50026",
            "#d73027",
            "#f46d43",
            "#fdae61",
            "#fee090",
            "#ffffbf",
            "#e0f3f8",
            "#abd9e9",
            "#74add1",
            "#4575b4",
            "#313695"
        ],
    "ds8_5": [
            "#d7191c",
            "#fdae61",
            "#ffffbf",
            "#a6d96a",
            "#1a9641"
        ],
    "ds8_7": [
            "#d73027",
            "#fc8d59",
            "#fee08b",
            "#ffffbf",
            "#d9ef8b",
            "#91cf60",
            "#1a9850"
        ],
    "ds8_8": [
            "#d73027",
            "#f46d43",
            "#fdae61",
            "#fee08b",
            "#d9ef8b",
            "#a6d96a",
            "#66bd63",
            "#1a9850"
        ],
    "ds8_9": [
            "#d73027",
            "#f46d43",
            "#fdae61",
            "#fee08b",
            "#ffffbf",
            "#d9ef8b",
            "#a6d96a",
            "#66bd63",
            "#1a9850"
        ],
    "ds8_11": [
            "#a50026",
            "#d73027",
            "#f46d43",
            "#fdae61",
            "#fee08b",
            "#ffffbf",
            "#d9ef8b",
            "#a6d96a",
            "#66bd63",
            "#1a9850",
            "#006837"
        ],
    "ds9_5": [
            "#d7191c",
            "#fdae61",
            "#ffffbf",
            "#abdda4",
            "#2b83ba"
        ],
    "ds9_7": [
            "#d53e4f",
            "#fc8d59",
            "#fee08b",
            "#ffffbf",
            "#e6f598",
            "#99d594",
            "#3288bd"
        ],
    "ds9_8": [
            "#d53e4f",
            "#f46d43",
            "#fdae61",
            "#fee08b",
            "#e6f598",
            "#abdda4",
            "#66c2a5",
            "#3288bd"
        ],
    "ds9_9": [
            "#d53e4f",
            "#f46d43",
            "#fdae61",
            "#fee08b",
            "#ffffbf",
            "#e6f598",
            "#abdda4",
            "#66c2a5",
            "#3288bd"
        ],
    "ds9_11": [
            "#9e0142",
            "#d53e4f",
            "#f46d43",
            "#fdae61",
            "#fee08b",
            "#ffffbf",
            "#e6f598",
            "#abdda4",
            "#66c2a5",
            "#3288bd",
            "#5e4fa2"
        ]
};

var datatree = {
    "acs1014": {


        "mhi": {
            "title": "Median Household Income",
            "table": "b19013",
            "section": "Income",
            "expression": ["b19013001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Household Income",
            "favstyle": ["ckmeans", "7", "mh1"],
            "bg": "yes"
        },

        "mhv": {
            "title": "Median Home Value",
            "section": "Housing",
            "table": "b25077",
            "expression": ["b25077001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Home Value",
            "favstyle": ["ckmeans", "7", "mh2"],
            "bg": "yes"
        },

        "mfi": {
            "title": "Median Family Income",
            "section": "Income",
            "table": "b19113",
            "expression": ["b19113001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Family Income",
            "favstyle": ["ckmeans", "7", "mh3"],
            "bg": "yes"
        },

        "pci": {
            "title": "Per Capita Income",
            "section": "Income",
            "table": "b19301",
            "expression": ["b19301001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Per Capita Income",
            "favstyle": ["ckmeans", "7", "mh4"],
            "bg": "yes"
        },

        "myb": {
            "title": "Median Year Housing Unit Built",
            "section": "Housing",
            "table": "b25035",
            "expression": ["b25035001"],
            "type": "regular",
            "minval": "1939",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Year Built",
            "favstyle": ["ckmeans", "7", "mh5"],
            "bg": "yes"
        },

        "pop": {
            "title": "Total Population",
            "section": "Population",
            "table": "b01001",
            "expression": ["b01001001"],
            "type": "number",
            "minval": "0",
            "mininc": "1",
            "usezeroasnull": "no",
            "favtable": "Basic Population (total)",
            "favstyle": ["ckmeans", "7", "mh7"],
            "bg": "yes"
        }
    },
    "acs1115": {


        "mhi": {
            "title": "Median Household Income",
            "table": "b19013",
            "section": "Income",
            "expression": ["b19013001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Household Income",
            "favstyle": ["ckmeans", "7", "mh1"],
            "bg": "yes"
        },

        "mhv": {
            "title": "Median Home Value",
            "section": "Housing",
            "table": "b25077",
            "expression": ["b25077001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Home Value",
            "favstyle": ["ckmeans", "7", "mh2"],
            "bg": "yes"
        },

        "mfi": {
            "title": "Median Family Income",
            "section": "Income",
            "table": "b19113",
            "expression": ["b19113001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Family Income",
            "favstyle": ["ckmeans", "7", "mh3"],
            "bg": "yes"
        },

        "pci": {
            "title": "Per Capita Income",
            "section": "Income",
            "table": "b19301",
            "expression": ["b19301001"],
            "type": "currency",
            "minval": "1",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Per Capita Income",
            "favstyle": ["ckmeans", "7", "mh4"],
            "bg": "yes"
        },

        "myb": {
            "title": "Median Year Housing Unit Built",
            "section": "Housing",
            "table": "b25035",
            "expression": ["b25035001"],
            "type": "regular",
            "minval": "1939",
            "mininc": "1",
            "usezeroasnull": "yes",
            "favtable": "Median Year Built",
            "favstyle": ["ckmeans", "7", "mh5"],
            "bg": "yes"
        },

        "pop": {
            "title": "Total Population",
            "section": "Population",
            "table": "b01001",
            "expression": ["b01001001"],
            "type": "number",
            "minval": "0",
            "mininc": "1",
            "usezeroasnull": "no",
            "favtable": "Basic Population (total)",
            "favstyle": ["ckmeans", "7", "mh7"],
            "bg": "yes"
        }
        /*,

                "pcth": {
                    "title": "Percent Hispanic",
                    "section": "Race",
                    "table": "b03002",
                    "expression": ["b03002012", "/", "b03002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": ".01",
                    "usezeroasnull": "no",
                    "favtable": "Race-Ethnicity (percent)",
                    "favstyle": ["ckmeans", "7", "mh6"],
                    "bg": "yes"
                },

                "pctw": {
                    "title": "Percent White",
                    "section": "Race",
                    "table": "b03002",
                    "expression": ["b03002003", "/", "b03002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Race-Ethnicity (percent)",
                    "favstyle": ["ckmeans", "7", "mh8"],
                    "bg": "yes"
                },

                "pctb": {
                    "title": "Percent Black",
                    "section": "Race",
                    "table": "b03002",
                    "expression": ["b03002004", "/", "b03002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Race-Ethnicity (percent)",
                    "favstyle": ["ckmeans", "7", "mh9"],
                    "bg": "yes"
                },

                "pctna": {
                    "title": "Percent Native American",
                    "section": "Race",
                    "table": "b03002",
                    "expression": ["b03002005", "/", "b03002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Race-Ethnicity (percent)",
                    "favstyle": ["ckmeans", "7", "sh1"],
                    "bg": "yes"
                },

                "pctasian": {
                    "title": "Percent Asian",
                    "section": "Race",
                    "table": "b03002",
                    "expression": ["b03002006", "/", "b03002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Race-Ethnicity (percent)",
                    "favstyle": ["ckmeans", "7", "sh2"],
                    "bg": "yes"
                },

                "pcthaw": {
                    "title": "Percent Hawaiian & PacIs",
                    "section": "Race",
                    "table": "b03002",
                    "expression": ["b03002007", "/", "b03002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Race-Ethnicity (percent)",
                    "favstyle": ["ckmeans", "7", "sh4"],
                    "bg": "yes"
                },

                "pctmale": {
                    "title": "Percent Male",
                    "section": "Population",
                    "table": "b01001",
                    "expression": ["b01001002", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Male & Female (percent)",
                    "favstyle": ["ckmeans", "7", "sh6"],
                    "bg": "yes"
                },

                "pctfemale": {
                    "title": "Percent Female",
                    "section": "Population",
                    "table": "b01001",
                    "expression": ["b01001026", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Male & Female (percent)",
                    "favstyle": ["ckmeans", "7", "sh5"],
                    "bg": "yes"
                },

                "ageless10": {
                    "title": "Percent Age Less Than 10",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001003", "+", "b01001004", "+", "b01001027", "+", "b01001028", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh1"],
                    "bg": "yes"
                },

                "ageless18": {
                    "title": "Percent Age Less Than 18",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001003", "+", "b01001004", "+", "b01001027", "+", "b01001028", "+", "b01001005", "+", "b01001006", "+", "b01001029", "+", "b01001030", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh2"],
                    "bg": "yes"
                },

                "age18to24": {
                    "title": "Percent Age 18 to 24",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001007", "+", "b01001008", "+", "b01001009", "+", "b01001010", "+", "b01001031", "+", "b01001032", "+", "b01001033", "+", "b01001034", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh3"],
                    "bg": "yes"
                },

                "age25to34": {
                    "title": "Percent Age 25 to 34",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001011", "+", "b01001012", "+", "b01001035", "+", "b01001036", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh4"],
                    "bg": "yes"
                },

                "age35to44": {
                    "title": "Percent Age 35 to 44",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001013", "+", "b01001014", "+", "b01001037", "+", "b01001038", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh5"],
                    "bg": "yes"
                },

                "age45to64": {
                    "title": "Percent Age 45 to 64",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001015", "+", "b01001016", "+", "b01001017", "+", "b01001018", "+", "b01001019", "+", "b01001039", "+", "b01001040", "+", "b01001041", "+", "b01001042", "+", "b01001043", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh6"],
                    "bg": "yes"
                },

                "age65plus": {
                    "title": "Percent Age 65 Plus",
                    "section": "Age",
                    "table": "b01001",
                    "expression": ["(", "b01001020", "+", "b01001021", "+", "b01001022", "+", "b01001023", "+", "b01001024", "+", "b01001025", "+", "b01001044", "+", "b01001045", "+", "b01001046", "+", "b01001047", "+", "b01001048", "+", "b01001049", ")", "/", "b01001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Age Group (percent)",
                    "favstyle": ["ckmeans", "7", "mh7"],
                    "bg": "yes"
                },

                "medianage": {
                    "title": "Median Age",
                    "section": "Age",
                    "table": "b01002",
                    "expression": ["b01002001"],
                    "type": "number",
                    "minval": "1",
                    "mininc": "0.1",
                    "usezeroasnull": "yes",
                    "favtable": "Median Age",
                    "favstyle": ["ckmeans", "7", "mh8"],
                    "bg": "yes"
                },

                "households": {
                    "title": "Total Households",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001001"],
                    "type": "number",
                    "minval": "0",
                    "mininc": "1",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh9"],
                    "bg": "yes"
                },

                "familyhh": {
                    "title": "Percent Family Households",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001002", "/", "b11001001"],
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "yes"
                },

                "nonfamhh": {
                    "title": "Percent Non Family Households",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001007", "/", "b11001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh11"],
                    "bg": "yes"
                },

                "housingun": {
                    "title": "Total Housing Units",
                    "section": "Housing",
                    "table": "b25002",
                    "expression": ["b25002001"],
                    "type": "number",
                    "minval": "0",
                    "mininc": "1",
                    "usezeroasnull": "no",
                    "favtable": "Housing Units (total)",
                    "favstyle": ["ckmeans", "7", "mh12"],
                    "bg": "yes"
                },

                "occhu": {
                    "title": "Percent Occupied Housing Units",
                    "section": "Housing",
                    "table": "b25002",
                    "expression": ["b25002002", "/", "b25002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Occupancy (percent)",
                    "favstyle": ["ckmeans", "7", "sh1"],
                    "bg": "yes"
                },

                "vachu": {
                    "title": "Percent Vacant Housing Units",
                    "section": "Housing",
                    "table": "b25002",
                    "expression": ["b25002003", "/", "b25002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Occupancy (percent)",
                    "favstyle": ["ckmeans", "7", "sh2"],
                    "bg": "yes"
                },

                "owned": {
                    "title": "Percent Owner Occupied Housing Units",
                    "section": "Housing",
                    "table": "b25003",
                    "expression": ["b25003002", "/", "b25003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Tenure (percent)",
                    "favstyle": ["ckmeans", "7", "sh4"],
                    "bg": "yes"
                },

                "rented": {
                    "title": "Percent Renter Occupied Housing Units",
                    "section": "Housing",
                    "table": "b25003",
                    "expression": ["b25003003", "/", "b25003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Tenure (percent)",
                    "favstyle": ["ckmeans", "7", "sh5"],
                    "bg": "yes"
                },

                "nohsdipl": {
                    "title": "Percent No High School Diploma",
                    "section": "Education",
                    "table": "b15003",
                    "expression": ["(", "b15003002", "+", "b15003003", "+", "b15003004", "+", "b15003005", "+", "b15003006", "+", "b15003007", "+", "b15003008", "+", "b15003009", "+", "b15003010", "+", "b15003011", "+", "b15003012", "+", "b15003013", "+", "b15003014", "+", "b15003015", "+", "b15003016", ")", "/", "b15003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Educational Attainment (percent)",
                    "favstyle": ["ckmeans", "7", "sh6"],
                    "bg": "yes"
                },

                "hsgradsc": {
                    "title": "Percent High School Degree or Some College",
                    "section": "Education",
                    "table": "b15003",
                    "expression": ["(", "b15003017", "+", "b15003018", "+", "b15003019", "+", "b15003020", "+", "b15003021", ")", "/", "b15003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Educational Attainment (percent)",
                    "favstyle": ["ckmeans", "7", "mh1"],
                    "bg": "yes"
                },

                "bachlhghr": {
                    "title": "Percent Bachelors Degree or Higher",
                    "section": "Education",
                    "table": "b15003",
                    "expression": ["(", "b15003022", "+", "b15003023", "+", "b15003024", "+", "b15003025", ")", "/", "b15003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Educational Attainment (percent)",
                    "favstyle": ["ckmeans", "7", "mh2"],
                    "bg": "yes"
                },

                "medcrent": {
                    "title": "Median Contract Rent",
                    "section": "Rent",
                    "table": "b25058",
                    "expression": ["b25058001"],
                    "type": "currency",
                    "minval": "1",
                    "mininc": "1",
                    "usezeroasnull": "yes",
                    "favtable": "Median Contract Rent",
                    "favstyle": ["ckmeans", "7", "mh3"],
                    "bg": "yes"
                },

                "medgrent": {
                    "title": "Median Gross Rent",
                    "section": "Rent",
                    "table": "b25064",
                    "expression": ["b25064001"],
                    "type": "currency",
                    "minval": "1",
                    "mininc": "1",
                    "usezeroasnull": "yes",
                    "favtable": "Median Gross Rent",
                    "favstyle": ["ckmeans", "7", "mh4"],
                    "bg": "yes"
                },

                "citzbirth": {
                    "title": "Percent US Citizen by Birth",
                    "section": "Citizenship",
                    "table": "b05001",
                    "expression": ["(", "b05001002", "+", "b05001003", "+", "b05001004", ")", "/", "b05001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Citizenship (percent)",
                    "favstyle": ["ckmeans", "7", "mh5"],
                    "bg": "no"
                },

                "citznat": {
                    "title": "Percent US Citizen by Naturalization",
                    "section": "Citizenship",
                    "table": "b05001",
                    "expression": ["b05001005", "/", "b05001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Citizenship (percent)",
                    "favstyle": ["ckmeans", "7", "mh6"],
                    "bg": "no"
                },

                "notcitz": {
                    "title": "Percent Not a US Citizen",
                    "section": "Citizenship",
                    "table": "b05001",
                    "expression": ["b05001006", "/", "b05001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Citizenship (percent)",
                    "favstyle": ["ckmeans", "7", "mh7"],
                    "bg": "no"
                },

                "borninsor": {
                    "title": "Percent US Native, Born in State of Residence",
                    "section": "Birthplace",
                    "table": "b05002",
                    "expression": ["b05002003", "/", "b05002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Birthplace (percent)",
                    "favstyle": ["ckmeans", "7", "mh8"],
                    "bg": "no"
                },

                "bornothst": {
                    "title": "Percent US Native, Born in Another State",
                    "section": "Birthplace",
                    "table": "b05002",
                    "expression": ["b05002004", "/", "b05002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Birthplace (percent)",
                    "favstyle": ["ckmeans", "7", "mh9"],
                    "bg": "no"
                },

                "nativeb": {
                    "title": "Percent US Native",
                    "section": "Birthplace",
                    "table": "b05002",
                    "expression": ["b05002002", "/", "b05002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Birthplace (percent)",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "no"
                },

                "foreignb": {
                    "title": "Percent Foreign Born",
                    "section": "Birthplace",
                    "table": "b05002",
                    "expression": ["b05002013", "/", "b05002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Birthplace (percent)",
                    "favstyle": ["ckmeans", "7", "mh11"],
                    "bg": "no"
                },

                "samehouse": {
                    "title": "Percent Did Not Move",
                    "section": "Migration",
                    "table": "b07003",
                    "expression": ["b07003004", "/", "b07003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Migration (percent)",
                    "favstyle": ["ckmeans", "7", "mh12"],
                    "bg": "no"
                },

                "samecnty": {
                    "title": "Percent Moved Within County",
                    "section": "Migration",
                    "table": "b07003",
                    "expression": ["b07003007", "/", "b07003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Migration (percent)",
                    "favstyle": ["ckmeans", "7", "sh1"],
                    "bg": "no"
                },

                "samestate": {
                    "title": "Percent Moved from Different County Within State",
                    "section": "Migration",
                    "table": "b07003",
                    "expression": ["b07003010", "/", "b07003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Migration (percent)",
                    "favstyle": ["ckmeans", "7", "sh2"],
                    "bg": "no"
                },

                "diffstate": {
                    "title": "Percent Moved from Different State",
                    "section": "Migration",
                    "table": "b07003",
                    "expression": ["b07003013", "/", "b07003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Migration (percent)",
                    "favstyle": ["ckmeans", "7", "sh4"],
                    "bg": "no"
                },

                "frmabroad": {
                    "title": "Percent Moved From Abroad",
                    "section": "Migration",
                    "table": "b07003",
                    "expression": ["b07003016", "/", "b07003001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Migration (percent)",
                    "favstyle": ["ckmeans", "7", "sh5"],
                    "bg": "no"
                },

                "carall": {
                    "title": "Percent Drove a Car Truck or Van to Work",
                    "section": "Transportation",
                    "table": "b08006",
                    "expression": ["b08006002", "/", "b08006001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Transportation to Work (percent)",
                    "favstyle": ["ckmeans", "7", "sh6"],
                    "bg": "no"
                },

                "usedpt": {
                    "title": "Percent Used Public Transportation",
                    "section": "Transportation",
                    "table": "b08006",
                    "expression": ["b08006008", "/", "b08006001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Transportation to Work (percent)",
                    "favstyle": ["ckmeans", "7", "mh1"],
                    "bg": "no"
                },

                "bike": {
                    "title": "Percent Biked to Work",
                    "section": "Transportation",
                    "table": "b08006",
                    "expression": ["b08006014", "/", "b08006001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Transportation to Work (percent)",
                    "favstyle": ["ckmeans", "7", "mh2"],
                    "bg": "no"
                },

                "walked": {
                    "title": "Percent Walked to Work",
                    "section": "Transportation",
                    "table": "b08006",
                    "expression": ["b08006015", "/", "b08006001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Transportation to Work (percent)",
                    "favstyle": ["ckmeans", "7", "mh3"],
                    "bg": "no"
                },

                "home": {
                    "title": "Percent Worked at Home",
                    "section": "Transportation",
                    "table": "b08006",
                    "expression": ["b08006017", "/", "b08006001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Transportation to Work (percent)",
                    "favstyle": ["ckmeans", "7", "mh4"],
                    "bg": "no"
                },

                "avghhsize": {
                    "title": "Average Household Size",
                    "section": "Housing",
                    "table": "b25010",
                    "expression": ["b25010001"],
                    "type": "number",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "yes",
                    "favtable": "Average Household Size",
                    "favstyle": ["ckmeans", "7", "mh5"],
                    "bg": "yes"
                },

                "insured": {
                    "title": "Percent Insured",
                    "section": "Insurance",
                    "table": "b27001",
                    "expression": ["(", "b27001004", "+", "b27001007", "+", "b27001010", "+", "b27001013", "+", "b27001016", "+", "b27001019", "+", "b27001022", "+", "b27001025", "+", "b27001028", "+", "b27001032", "+", "b27001035", "+", "b27001038", "+", "b27001041", "+", "b27001044", "+", "b27001047", "+", "b27001050", "+", "b27001053", "+", "b27001056", ")", "/", "b27001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Insurance (percent)",
                    "favstyle": ["ckmeans", "7", "mh7"],
                    "bg": "no"
                },

                "uninsured": {
                    "title": "Percent No Insurance",
                    "section": "Insurance",
                    "table": "b27001",
                    "expression": ["(", "b27001005", "+", "b27001008", "+", "b27001011", "+", "b27001014", "+", "b27001017", "+", "b27001020", "+", "b27001023", "+", "b27001026", "+", "b27001029", "+", "b27001033", "+", "b27001036", "+", "b27001039", "+", "b27001042", "+", "b27001045", "+", "b27001048", "+", "b27001051", "+", "b27001054", "+", "b27001057", ")", "/", "b27001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Insurance (percent)",
                    "favstyle": ["ckmeans", "7", "mh8"],
                    "bg": "no"
                },

                "enrolled": {
                    "title": "Percent Enrolled in School",
                    "section": "Education",
                    "table": "b14001",
                    "expression": ["b14001002", "/", "b14001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Enrolled in School (percent)",
                    "favstyle": ["ckmeans", "7", "mh9"],
                    "bg": "no"
                },

                "k8": {
                    "title": "Percent of Enrolled in K-8",
                    "section": "Education",
                    "table": "b14001",
                    "expression": ["(", "b14001004", "+", "b14001005", "+", "b14001006", ")", "/", "b14001002"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Enrolled in School (percent)",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "no"
                },

                "enrhs": {
                    "title": "Percent of Enrolled in 9-12",
                    "section": "Education",
                    "table": "b14001",
                    "expression": ["b14001007", "/", "b14001002"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Enrolled in School (percent)",
                    "favstyle": ["ckmeans", "7", "mh11"],
                    "bg": "no"
                },

                "enrcollege": {
                    "title": "Percent of Enrolled in Colleges",
                    "section": "Education",
                    "table": "b14001",
                    "expression": ["(", "b14001008", "+", "b14001009", ")", "/", "b14001002"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Enrolled in School (percent)",
                    "favstyle": ["ckmeans", "7", "mh12"],
                    "bg": "no"
                },

                "notenrolled": {
                    "title": "Percent Not Enrolled in School",
                    "section": "Education",
                    "table": "b14001",
                    "expression": ["b14001010", "/", "b14001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Enrolled in School (percent)",
                    "favstyle": ["ckmeans", "7", "sh1"],
                    "bg": "no"
                },

                "inpoverty": {
                    "title": "Percent in Poverty",
                    "section": "Poverty",
                    "table": "c17002",
                    "expression": ["(", "c17002002", "+", "c17002003", ")", "/", "c17002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Poverty (percent)",
                    "favstyle": ["ckmeans", "7", "sh2"],
                    "bg": "yes"
                },

                "inpov150": {
                    "title": "Percent Below 150% Poverty",
                    "section": "Poverty",
                    "table": "c17002",
                    "expression": ["(", "c17002002", "+", "c17002003", "+", "c17002004", "+", "c17002005", ")", "/", "c17002001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Poverty (percent)",
                    "favstyle": ["ckmeans", "7", "sh4"],
                    "bg": "yes"
                },

                "disabled": {
                    "title": "Percent Disabled",
                    "section": "Disability",
                    "table": "b18101",
                    "expression": ["(", "b18101004", "+", "b18101007", "+", "b18101010", "+", "b18101013", "+", "b18101016", "+", "b18101019", "+", "b18101023", "+", "b18101026", "+", "b18101029", "+", "b18101032", "+", "b18101035", "+", "b18101038", ")", "/", "b18101001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Disability (percent)",
                    "favstyle": ["ckmeans", "7", "sh5"],
                    "bg": "no"
                },

                "unemp": {
                    "title": "Percent Unemployed",
                    "section": "Employment",
                    "table": "b23025",
                    "expression": ["b23025005", "/", "b23025002"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Unemployment (percent)",
                    "favstyle": ["ckmeans", "7", "sh6"],
                    "bg": "yes"
                },

                "armedforces": {
                    "title": "Percent of Labor Force in Armed Forces",
                    "section": "Employment",
                    "table": "b23025",
                    "expression": ["b23025006", "/", "b23025002"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Unemployment (percent)",
                    "favstyle": ["ckmeans", "7", "mh1"],
                    "bg": "yes"
                },

                "realtaxes": {
                    "title": "Median Real Estate Taxes Paid",
                    "section": "Housing",
                    "table": "b25103",
                    "expression": ["b25103001"],
                    "type": "currency",
                    "minval": "1",
                    "mininc": "1",
                    "usezeroasnull": "yes",
                    "favtable": "",
                    "favstyle": ["ckmeans", "7", "mh2"],
                    "bg": "no"
                },

                "moc_wmc": {
                    "title": "Median Monthly Owner Costs (w Mortgage)",
                    "section": "Housing",
                    "table": "b25088",
                    "expression": ["b25088002"],
                    "type": "currency",
                    "minval": "1",
                    "mininc": "1",
                    "usezeroasnull": "yes",
                    "favtable": "",
                    "favstyle": ["ckmeans", "7", "mh3"],
                    "bg": "yes"
                },

                "moc_nmc": {
                    "title": "Median Monthly Owner Costs (no Mortgage)",
                    "section": "Housing",
                    "table": "b25088",
                    "expression": ["b25088003"],
                    "type": "currency",
                    "minval": "1",
                    "mininc": "1",
                    "usezeroasnull": "yes",
                    "favtable": "",
                    "favstyle": ["ckmeans", "7", "mh4"],
                    "bg": "yes"
                },

                "hhalone": {
                    "title": "Pct of Households w Householder Living Alone",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001008", "/", "b11001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "",
                    "favstyle": ["ckmeans", "7", "mh5"],
                    "bg": "yes"
                },

                "hhnalone": {
                    "title": "Pct of Households w Householder Not Living Alone",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001009", "/", "b11001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh6"],
                    "bg": "yes"
                },

                "mcfhh": {
                    "title": "Percent Married Couple Family Households",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001003", "/", "b11001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh7"],
                    "bg": "yes"
                },

                "mhhnwphh": {
                    "title": "Percent Male Householder, No Wife Present Households",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001005", "/", "b11001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh8"],
                    "bg": "yes"
                },

                "fhhnhphh": {
                    "title": "Percent Female Householder, No Husband Present Households",
                    "section": "Household",
                    "table": "b11001",
                    "expression": ["b11001006", "/", "b11001001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "Household Type (total)",
                    "favstyle": ["ckmeans", "7", "mh9"],
                    "bg": "yes"
                },

                "hhwchild": {
                    "title": "Percent Households w Children Under 18 Present",
                    "section": "Household",
                    "table": "b11005",
                    "expression": ["b11005002", "/", "b11005001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": "0.01",
                    "usezeroasnull": "no",
                    "favtable": "",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "yes"
                },
                "cbhm": {
                    "title": "Cost Burdened Households (with a Mortgage)",
                    "section": "Housing",
                    "table": "b25101",
                    "expression": ["(", "b25101006", "+", "b25101010", "+", "b25101014", "+", "b25101020", "+", "b25101022", ")", "/", "b25101002"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": ".01",
                    "usezeroasnull": "no",
                    "favtable": "Cost Burdened Households (with a Mortgage)",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "yes"
                },
                "elvw": {
                    "title": "Population 5 and Over That Speaks English Less Than Very Well",
                    "section": "Language",
                    "table": "b06007",
                    "expression": ["(", "b06007008", "+", "b06007005", ")", "/", "b06007001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": ".01",
                    "usezeroasnull": "no",
                    "favtable": "Place of Birth by Language Spoken at Home and Ability to Speak English",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "no"
                },
                "p5ss": {
                    "title": "Population 5 and Over That Speaks Spanish",
                    "section": "Language",
                    "table": "b06007",
                    "expression": ["b06007003", "/", "b06007001"],
                    "type": "percent",
                    "minval": "0",
                    "mininc": ".01",
                    "usezeroasnull": "no",
                    "favtable": "Place of Birth by Language Spoken at Home and Ability to Speak English",
                    "favstyle": ["ckmeans", "7", "mh10"],
                    "bg": "no"
                }
        */


    }
};

function updateLegend(current_dropdown_value, geography_name) {

    var current_store_values = Store.getState();
    var dataset = current_store_values.dataset;

    let breaks_style = datatree[dataset][current_dropdown_value].favstyle[0] + datatree[dataset][current_dropdown_value].favstyle[1];
    let legend_breaks = computed_breaks[dataset][current_dropdown_value][geography_name][breaks_style];

    let color_style = datatree[dataset][current_dropdown_value].favstyle[2] + '_' + datatree[dataset][current_dropdown_value].favstyle[1];
    let colorscheme = colortree[color_style];

    let type = datatree[dataset][current_dropdown_value].type;
    let default_color = '#fff';
    let title = datatree[dataset][current_dropdown_value].title;

    let html_string = "<div class='legend-title-text'>" + title + "</div><table>"; // inner HTML to be inserted into legend

    for (let i = legend_breaks.length - 1; i > -1; i--) {
        html_string += '<tr><td class="t-pad-sides"><div class="legend-box" style="background-color:' + colorscheme[i] +
            ';"></div></td><td class="t-pad-sides"></td><td class="t-align-right">' + formatValue(legend_breaks[i], type) + '</td><td class="t-pad-sides">' + ((i === legend_breaks.length - 1) ? '+' : '') + '</td></tr>';
    }

    // default color
    html_string += '<tr><td class="t-pad-sides"><div class="legend-box" style="background-color:' + default_color +
        ';"></div></td><td class="t-pad-sides">&lt;</td><td class="t-align-right">' + formatValue(legend_breaks[0], type) + '</td><td class="t-pad-sides"></td></tr></table>';

    document.getElementById('legend-ctrl').innerHTML = html_string;

}


function formatValue(val, type) {

    if (type === 'currency') {
        return ' $' + val.toLocaleString(); // add currency and thousands comma
    }
    if (type === 'number') {
        return val.toLocaleString(); // add thousands comma
    }
    if (type === 'regular') {
        return val; // no formatting
    }
}

/* global fetch */
/* global exprEval */
/* global localforage */

function getGeographyName(geoscheme, zoom) {

    var geography_name = "";

    Object.keys(geoscheme).forEach(function (key) {
        if (zoom >= geoscheme[key][0] && zoom < geoscheme[key][1]) {
            geography_name = key;
        }
    });

    return geography_name;

}


var updateMap = function (map) {

    var current_store_values = Store.getState();
    var theme = current_store_values.theme;
    var geoscheme = current_store_values.geoscheme;
    var dataset = current_store_values.dataset;
    var zoom = map.getZoom();
    var zoom_breaks = geo[dataset][geoscheme];

    var geography_name = getGeographyName(zoom_breaks, zoom);
    var features = map.queryRenderedFeatures({
        layers: [geography_name + '-fill']
    });

    var all_geonums = Array.from(new Set(features.map(function (feature) {
        return feature.properties.geonum;
    })));

    var comma_delimited_geonums = all_geonums.join(",");

    updateLegend(theme, geography_name);

    var previously_gathered_data = getPreviousData(datatree[dataset][theme].table, comma_delimited_geonums, dataset);

    previously_gathered_data.then(function (data) {

        var succesful_records = getSuccessfulRecords(data);
        var succesful_geonums = getSuccessfulGeonums(succesful_records);
        var unfound_geonums = getUnfoundGeonums(succesful_geonums, comma_delimited_geonums.split(",") || []);

        if (unfound_geonums.length > 0) {
            fetchCensusData(theme, unfound_geonums.join(","), dataset).then((acs_data) => {
                var combined_data = succesful_records.concat(acs_data);
                paintMap(theme, combined_data, geography_name, dataset);
            });
        }
        else {
            paintMap(theme, succesful_records, geography_name, dataset);
        }

        function paintMap(theme, map_data, geography_name, dataset) {
            map.setPaintProperty(geography_name + '-fill', 'fill-opacity', 0.8); // make layer visible
            map.setPaintProperty(geography_name + '-fill', 'fill-color', getMapStyle(theme, map_data, geography_name, dataset));
        }

    });


};


function getUnfoundGeonums(succesful_geonums, all_geonums) {
    return all_geonums.filter(function (geonum) {
        return !succesful_geonums.includes(geonum);
    });
}



function getSuccessfulRecords(data) {

    if (!data) {
        return [];
    }

    return data.filter(function (record) {
        if (record) {
            return record;
        }
    });
}


function getSuccessfulGeonums(data) {
    return data.map(function (record) {
        return record.geonum;
    });
}


function fetchCensusData(theme, comma_delimited_geonums, dataset) {
    // load census data
    return fetch('https://gis.dola.colorado.gov/capi/demog?limit=99999&db=' + dataset + '&table=' + datatree[dataset][theme].table + '&geonum=' + comma_delimited_geonums).then(function (fetch_response) {
        return fetch_response.json();
    }).then(function (census_response) {

        // save each returned value to IndexedDB
        census_response.data.forEach(function (record) {
            var key = dataset + ":" + datatree[dataset][theme].table + ":" + record.geonum;
            localforage.setItem(key, record)
                .catch(function (err) {
                    console.log(err);
                });
        });

        return census_response.data;
    });
}

function getPreviousData(table, comma_delimited_geonums, dataset) {

    if (!comma_delimited_geonums) {
        return Promise.all([]);
    }

    // create Promise Array
    var previous_data = comma_delimited_geonums.split(",").map(function (geonum) {
        var key = dataset + ":" + table + ":" + geonum;
        return localforage.getItem(key);
    });

    return Promise.all(previous_data);

}


function getMapStyle(style_code, acs_data, geography_name, dataset) {

    let expression = datatree[dataset][style_code].expression;
    let default_color = "#fff"; // lowest break color
    let null_color = "#fff";
    let zero_color = "#fff";


    let breaks_style = datatree[dataset][style_code].favstyle[0] + datatree[dataset][style_code].favstyle[1];
    let color_style = datatree[dataset][style_code].favstyle[2] + '_' + datatree[dataset][style_code].favstyle[1];

    let array = computed_breaks[dataset][style_code][geography_name][breaks_style];
    let colorscheme = colortree[color_style];

    // set up parser (https://github.com/silentmatt/expr-eval)
    var parser = new exprEval.Parser();
    var exp = parser.parse(expression.join(""));

    // iterate through acs data
    let stops = acs_data.map(function (row) {

        let evaluated_value;

        // don't attempt to use expression parser if array is only 1 element
        // which means single variable
        if (expression.length > 1) {

            let replacers_object = {};

            getUniqueExpressionKeys(expression).forEach(function (key) {
                replacers_object[key] = row[key];
            });

            evaluated_value = exp.evaluate(replacers_object);
        }
        else {
            evaluated_value = row[expression[0]];
        }


        // default case
        let color = default_color;

        // iterate through array breaks
        array.forEach(function (entry, i) {
            if (evaluated_value > entry) {
                color = colorscheme[i];
            }
        });

        // null case
        if (!evaluated_value) {
            color = null_color;
        }

        // zero case: always after the null case
        if (evaluated_value === 0) {
            color = zero_color;
        }

        return [row.geonum, color];

    });

    return {
        "property": "geonum",
        "type": "categorical",
        "default": "transparent",
        "stops": stops
    };

}


function getUniqueExpressionKeys(expression) {

    // extract data fields from expression (example: ["b01001001", "b01001002"])
    let keys = expression.filter(function (d) {
        if (d !== "+" && d !== "-" & d !== "(" & d !== ")" & d !== "*" & d !== "/") {
            return true;
        }
    });

    let unique_keys = Array.from(new Set(keys));

    return unique_keys;
}

var style = {
  "version": 8,
  "name": "Klokantech Basic",
  "metadata": {
    "mapbox:autocomposite": false,
    "mapbox:type": "template",
    "maputnik:renderer": "mbgljs"
  },
  "center": [
    8.54806714892635,
    47.37180823552663
  ],
  "zoom": 12.241790506353492,
  "bearing": 0,
  "pitch": 0,
  "sources": {
    "openmaptiles": {
      "attribution": "<a href='http://openmaptiles.org/'>©OpenMapTiles</a> <a href='www.openstreetmap.org/copyright' >©OpenStreetMap contributors</a>",
      "type": "vector",
      "tiles": [
        "https://red-meteor.com/mbtiles/united_states_of_america/{z}/{x}/{y}.pbf"
      ],
      "minzoom": 0,
      "maxzoom": 13,
    }
  },
  "glyphs": "https://free.tilehosting.com/fonts/{fontstack}/{range}.pbf?key=igsf1AR2UOc8hfBlRsM2",
  "layers": [

    {
      "id": "background",
      "type": "background",
      "paint": {
        "background-color": "hsl(47, 26%, 88%)"
      }
    },
    {
      "id": "landuse-residential",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": [
            "all",
            [
              "==",
              "$type",
              "Polygon"
            ],
            [
              "==",
              "class",
              "residential"
            ]
          ],
      "layout": {
        "visibility": "visible"
      },
      "paint": {
        "fill-color": "hsl(47, 13%, 86%)",
        "fill-opacity": 0.7
      }
    }, {
      "id": "landcover_grass",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": [
            "==",
            "class",
            "grass"
          ],
      "paint": {
        "fill-color": "hsl(82, 46%, 72%)",
        "fill-opacity": 0.45
      }
    }, {
      "id": "park",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "park",
      "paint": {
        "fill-color": "rgba(192, 216, 151, 0.53)",
        "fill-opacity": 1
      }
    }, {
      "id": "landcover_wood",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": [
            "==",
            "class",
            "wood"
          ],
      "paint": {
        "fill-color": "hsl(82, 46%, 72%)",
        "fill-opacity": {
          "base": 1,
          "stops": [
                [
                  8,
                  0.6
                ],
                [
                  22,
                  1
                ]
              ]
        }
      }
    }, {
      "id": "water",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "water",
      "filter": [
            "==",
            "$type",
            "Polygon"
          ],
      "paint": {
        "fill-color": "hsl(205, 56%, 73%)"
      }
    }, {
      "id": "landuse",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landuse",
      "filter": [
            "==",
            "class",
            "agriculture"
          ],
      "layout": {
        "visibility": "visible"
      },
      "paint": {
        "fill-color": "#eae0d0"
      }
    }, {
      "id": "landuse_overlay_national_park",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "landcover",
      "filter": [
            "==",
            "class",
            "national_park"
          ],
      "paint": {
        "fill-color": "#E1EBB0",
        "fill-opacity": {
          "base": 1,
          "stops": [
                [
                  5,
                  0
                ],
                [
                  9,
                  0.75
                ]
              ]
        }
      }
    }, {
      "id": "park_outline",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "park",
      "layout": {},
      "paint": {
        "line-color": "rgba(159, 183, 118, 0.69)",
        "line-dasharray": [
              0.5,
              1
            ]
      }
    }, {
      "id": "waterway",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "waterway",
      "filter": [
            "==",
            "$type",
            "LineString"
          ],
      "paint": {
        "line-color": "hsl(205, 56%, 73%)",
        "line-width": {
          "base": 1.4,
          "stops": [
                [
                  8,
                  1
                ],
                [
                  20,
                  8
                ]
              ]
        },
        "line-opacity": 1
      }
    }, {
      "id": "building",
      "type": "fill",
      "source": "openmaptiles",
      "source-layer": "building",
      "paint": {
        "fill-color": "hsl(39, 41%, 86%)",
        "fill-outline-color": "hsl(36, 45%, 80%)",
        "fill-opacity": {
          "base": 1,
          "stops": [
                [
                  13,
                  0.6
                ],
                [
                  14,
                  1
                ]
              ]
        }
      }
    }, {
      "id": "road_path",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "transportation",
      "filter": [
            "all",
            [
              "==",
              "$type",
              "LineString"
            ],
            [
              "in",
              "class",
              "path",
              "track"
            ]
          ],
      "layout": {
        "line-cap": "square",
        "line-join": "bevel"
      },
      "paint": {
        "line-color": "hsl(0, 0%, 97%)",
        "line-dasharray": [
              1,
              1
            ],
        "line-width": {
          "base": 1.55,
          "stops": [
                [
                  4,
                  0.25
                ],
                [
                  20,
                  10
                ]
              ]
        }
      }
    }, {
      "id": "road_minor",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "transportation",
      "filter": [
            "all",
            [
              "==",
              "$type",
              "LineString"
            ],
            [
              "in",
              "class",
              "minor",
              "service"
            ]
          ],
      "layout": {
        "line-cap": "round",
        "line-join": "round"
      },
      "paint": {
        "line-color": "hsl(0, 0%, 97%)",
        "line-width": {
          "base": 1.55,
          "stops": [
                [
                  4,
                  0.25
                ],
                [
                  20,
                  30
                ]
              ]
        }
      }
    }, {
      "id": "road_trunk_primary",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "transportation",
      "filter": [
            "all",
            [
              "==",
              "$type",
              "LineString"
            ],
            [
              "in",
              "class",
              "trunk",
              "primary"
            ]
          ],
      "layout": {
        "line-cap": "round",
        "line-join": "round"
      },
      "paint": {
        "line-color": "#fff",
        "line-width": {
          "base": 1.4,
          "stops": [
                [
                  6,
                  0.5
                ],
                [
                  20,
                  30
                ]
              ]
        }
      }
    }, {
      "id": "road_secondary_tertiary",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "transportation",
      "filter": [
            "all",
            [
              "==",
              "$type",
              "LineString"
            ],
            [
              "in",
              "class",
              "secondary",
              "tertiary"
            ]
          ],
      "layout": {
        "line-cap": "round",
        "line-join": "round"
      },
      "paint": {
        "line-color": "#fff",
        "line-width": {
          "base": 1.4,
          "stops": [
                [
                  6,
                  0.5
                ],
                [
                  20,
                  20
                ]
              ]
        }
      }
    }, {
      "id": "road_major_motorway",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "transportation",
      "filter": [
            "all",
            [
              "==",
              "$type",
              "LineString"
            ],
            [
              "==",
              "class",
              "motorway"
            ]
          ],
      "layout": {
        "line-cap": "round",
        "line-join": "round"
      },
      "paint": {
        "line-color": "hsl(0, 0%, 100%)",
        "line-width": {
          "base": 1.4,
          "stops": [
                [
                  8,
                  1
                ],
                [
                  16,
                  10
                ]
              ]
        },
        "line-offset": 0
      }
    }, {
      "id": "admin_sub",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "boundary",
      "filter": [
            "in",
            "admin_level",
            4,
            6,
            8
          ],
      "layout": {
        "visibility": "visible"
      },
      "paint": {
        "line-color": "rgb(50, 50, 50)",
        "line-opacity": 0.8,
        "line-width": 1.5,
        "line-dasharray": [
              2,
              1
            ]
      }
    }, {
      "id": "admin_country",
      "type": "line",
      "source": "openmaptiles",
      "source-layer": "boundary",
      "filter": [
            "all",
            [
              "<=",
              "admin_level",
              2
            ],
            [
              "==",
              "$type",
              "LineString"
            ]
          ],
      "layout": {
        "line-cap": "round",
        "line-join": "round"
      },
      "paint": {
        "line-color": "hsla(0, 8%, 22%, 0.51)",
        "line-width": {
          "base": 1.3,
          "stops": [
                [
                  3,
                  0.5
                ],
                [
                  22,
                  15
                ]
              ]
        }
      }
    }, {
      "id": "poi_label",
      "type": "symbol",
      "source": "openmaptiles",
      "source-layer": "poi",
      "minzoom": 5,
      "filter": [
            "all",
            [
              "==",
              "$type",
              "Point"
            ],
            [
              "==",
              "rank",
              1
            ]
          ],
      "layout": {
        "text-size": 11,
        "text-font": [
              "Klokantech Noto Sans Regular",
              "Klokantech Noto Sans CJK Regular"
            ],
        "visibility": "visible",
        "text-offset": [
              0,
              0.5
            ],
        "icon-size": 1,
        "text-anchor": "top",
        "text-field": "{name}",
        "text-max-width": 8
      },
      "paint": {
        "text-color": "#666",
        "text-halo-width": 1,
        "text-halo-color": "rgba(255,255,255,0.75)",
        "text-halo-blur": 1
      }
    }, {
      "id": "road_major_label",
      "type": "symbol",
      "source": "openmaptiles",
      "source-layer": "transportation_name",
      "filter": [
            "==",
            "$type",
            "LineString"
          ],
      "layout": {
        "symbol-placement": "line",
        "text-field": "{name}",
        "text-font": [
              "Klokantech Noto Sans Regular",
              "Klokantech Noto Sans CJK Regular"
            ],
        "text-transform": "uppercase",
        "text-letter-spacing": 0.1,
        "text-size": {
          "base": 1.4,
          "stops": [
                [
                  10,
                  8
                ],
                [
                  20,
                  14
                ]
              ]
        },
        "text-rotation-alignment": "map"
      },
      "paint": {
        "text-color": "#000",
        "text-halo-color": "hsl(0, 0%, 100%)",
        "text-halo-width": 2
      }
    }, {
      "id": "place_label_other",
      "type": "symbol",
      "source": "openmaptiles",
      "source-layer": "place",
      "minzoom": 8,
      "filter": [
            "all",
            [
              "==",
              "$type",
              "Point"
            ],
            [
              "!=",
              "class",
              "city"
            ]
          ],
      "layout": {
        "text-field": "{name_en}",
        "text-font": [
              "Klokantech Noto Sans Regular",
              "Klokantech Noto Sans CJK Regular"
            ],
        "text-max-width": 6,
        "text-size": {
          "stops": [
                [
                  6,
                  10
                ],
                [
                  12,
                  14
                ]
              ]
        },
        "visibility": "visible",
        "text-anchor": "center"
      },
      "paint": {
        "text-color": "hsl(0, 10%, 25%)",
        "text-halo-color": "hsl(0, 0%, 100%)",
        "text-halo-blur": 0,
        "text-halo-width": 2
      }
    }, {
      "id": "place_label_city",
      "type": "symbol",
      "source": "openmaptiles",
      "source-layer": "place",
      "maxzoom": 16,
      "filter": [
            "all",
            [
              "==",
              "$type",
              "Point"
            ],
            [
              "==",
              "class",
              "city"
            ]
          ],
      "layout": {
        "text-field": "{name_en}",
        "text-font": [
              "Klokantech Noto Sans Regular",
              "Klokantech Noto Sans CJK Regular"
            ],
        "text-max-width": 10,
        "text-size": {
          "stops": [
                [
                  3,
                  12
                ],
                [
                  8,
                  16
                ]
              ]
        }
      },
      "paint": {
        "text-color": "hsl(0, 0%, 0%)",
        "text-halo-color": "hsla(0, 0%, 100%, 0.75)",
        "text-halo-blur": 0,
        "text-halo-width": 2
      }
    }, {
      "id": "country_label",
      "type": "symbol",
      "source": "openmaptiles",
      "source-layer": "place",
      "maxzoom": 12,
      "filter": [
            "all",
            [
              "==",
              "$type",
              "Point"
            ],
            [
              "==",
              "class",
              "country"
            ]
          ],
      "layout": {
        "text-field": "{name}",
        "text-font": [
              "Klokantech Noto Sans Bold",
              "Klokantech Noto Sans CJK Bold"
            ],
        "text-max-width": 10,
        "text-size": {
          "stops": [
                [
                  3,
                  12
                ],
                [
                  8,
                  22
                ]
              ]
        }
      },
      "paint": {
        "text-color": "hsl(0, 0%, 13%)",
        "text-halo-color": "rgba(255,255,255,0.75)",
        "text-halo-width": 2,
        "text-halo-blur": 0
      }
    }
  ],
  "id": "ciwf4zbsv007y2pmt2rspc1dc"
};

// Control implemented as ES6 class
class LegendCtrl {

    onAdd(map) {
        this._map = map;
        this._container = document.createElement('div');
        this._container.id = 'legend-ctrl';
        this._container.className = 'mapboxgl-ctrl custom-control-style';
        return this._container;
    }

    onRemove() {
        this._container.parentNode.removeChild(this._container);
        this._map = undefined;
    }
    
    remove() {
        this.onRemove(); // alias the onRemove function (which presumably is also used in internal functions by Mapbox GL JS)
    }
    
}

// Control implemented as ES6 class

class EasyButton {

    constructor(div_id, icon, title) {
        this.div_id = div_id;
        this.icon = icon;
        this.title = title;
    }

    onAdd(map) {
        this._map = map;
        this._container = document.createElement('button');
        this._container.className = "mapboxgl-ctrl custom-control-style";
        this._container.id = this.div_id;
        this._container.title = this.title;
        this._span = document.createElement('span');
        this._span.className = 'easy-btn fa fa-lg ' + this.icon;
        this._container.appendChild(this._span);

        return this._container;
    }

    onRemove() {
        this._container.parentNode.removeChild(this._container);
        this._map = undefined;
    }
}

/* global mapboxgl */

var addMapControls = function (map) {
    map.addControl(new EasyButton('custom_search', 'fa-search', 'Search'), 'top-right');
    map.addControl(new mapboxgl.NavigationControl());
    map.addControl(new LegendCtrl(), 'bottom-right');
    map.addControl(new EasyButton('choose_theme', 'fa-bars', 'Select a Theme'), 'top-left');
    map.addControl(new EasyButton('view_table', 'fa-table', 'View a Data Table'), 'top-left');
    map.addControl(new EasyButton('view_chart', 'fa-line-chart', 'View a Chart'), 'top-left');
    map.addControl(new EasyButton('save_map', 'fa-floppy-o', 'Save a Map Image'), 'top-left');
    map.addControl(new EasyButton('clear_selection', 'fa-eraser', 'Clear Selection'), 'top-left');
};

/* global $ */

var populateThemes = function () {

    $('#accordion').html('');

    var current_store_values = Store.getState();
    var dataset = current_store_values.dataset;
    console.log('dataset');
    console.log(dataset);
    var theme = current_store_values.theme;

    var theme_keys = Object.keys(datatree[dataset]);

    var sections_array = theme_keys.map(function (key) {
        return datatree[dataset][key].section;
    });

    let unique_sections = Array.from(new Set(sections_array));

    unique_sections.sort();

    unique_sections.forEach(function (section, i) {
        $('#accordion').append('<div class="panel panel-default"><div class="panel-heading" role="tab" id="heading' + i +
            '"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse' + i +
            '" aria-expanded="false" aria-controls="collapse">' + section + '</a></h4></div><div id="collapse' + i +
            '" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading' + i + '"><div id="id' + section +
            '" class="panel-body"></div></div></div>');
    });

    theme_keys.forEach(function (key) {
        let vchecked = (theme === key) ? 'checked' : '';
        $('#id' + datatree[dataset][key].section).append('<div class="radio"><label><input type="radio" name="optionsRadios" value="' +
            key + '" ' + vchecked + '> ' + datatree[dataset][key].title + '</label></div>'); //to accordion
    });

    $('input[name=optionsRadios]:radio').change(function () {
        Store.dispatch({
            type: 'CHANGE THEME',
            value: this.value
        });
    });

};

/* global $ */

function populateGeography() {

    var current_store_values = Store.getState();

    var geoscheme = current_store_values.geoscheme;
    var dataset = current_store_values.dataset;


    var html = '<br />';

    var keys = Object.keys(geo[dataset]);

    if (!keys.includes(geoscheme)) {
        console.log('does not include geoscheme');

        geoscheme = Object.keys(geo[dataset])[0];
        console.log(geoscheme);

        Store.dispatch({
            type: 'CHANGE GEOSCHEME',
            value: geoscheme
        });

    }

    keys.forEach(function (key) {
        var ifchecked = (key === geoscheme) ? 'checked' : '';
        html += '<div class="input-group"><span class="input-group-addon"><input type="radio" name="geoschemegroup"  value="' + key + '" ' + ifchecked + '></span><input type="text" value="' + key + '" class="form-control"></div>';
    });


    $("#geogroup").html(html);


    $("input:radio[name=geoschemegroup]").change(function () {

        var new_geoscheme = $('input:radio[name=geoschemegroup]:checked').val();
        console.log(new_geoscheme);

        Store.dispatch({
            type: 'CHANGE GEOSCHEME',
            value: new_geoscheme
        });

    });

}

/* global $ */

function populateDatasets() {

    var current_store_values = Store.getState();

    var default_dataset = current_store_values.dataset;

    var acs_html = '';
    var census_html = '';

    var dataset_keys = Object.keys(dataset);

    dataset_keys.forEach(function (key) {

        var ifchecked = (key === default_dataset) ? 'checked' : '';

        if (dataset[key].type === "ACS") {
            acs_html += '<div class="input-group"><span class="input-group-addon"><input type="radio" name="datasetgroup"  value="' + key + '" ' + ifchecked + '></span><input type="text" value="' + dataset[key].title + '" class="form-control"></div>';
        }
        else if (dataset[key].type === "Census") {
            census_html += '<div class="input-group"><span class="input-group-addon"><input type="radio" name="datasetgroup"  value="' + key + '" ' + ifchecked + '></span><input type="text" value="' + dataset[key].title + '" class="form-control"></div>';
        }
        else {
            console.error('Unknown Dataset Type');
        }


    });


    $("#acsgroup").append(acs_html);
    $("#censusgroup").append(census_html);


    $("input:radio[name=datasetgroup]").change(function () {

        var new_dataset = $('input:radio[name=datasetgroup]:checked').val();
        console.log(new_dataset);

        Store.dispatch({
            type: 'CHANGE DATASET',
            value: new_dataset
        });

    });


}

var setupMapControls = function (map) {


    observeStore('theme', function (theme) {
        console.log('theme changed to ' + theme);
        updateMap(map);
    });

    observeStore('dataset', function (dataset) {
        console.log('dataset changed to ' + dataset);
        populateGeography();
    });

    observeStore('geoscheme', function (geoscheme) {
        console.log('geoscheme changed to ' + geoscheme);
        populateThemes();
    });


    // will only be called once
    populateDatasets();
    populateGeography();
    populateThemes();
};

/* global $ */

var setupMapControlEvents = function () {


    $('#myModal').modal({
        show: false
    });

    document.getElementById('choose_theme').addEventListener('click', clickChooseTheme, false);

    function clickChooseTheme() {
        $('#myModal').modal('show');
    }



};

/* global mapboxgl */


var map = new mapboxgl.Map({
    container: 'map',
    style: style,
    minZoom: 3,
    maxZoom: 13.99,
    zoom: 3,
    center: [-104, 39]
});


addMapControls(map);
setupMapControls(map);
setupMapControlEvents(map);



map.on('load', function () {

    setTileSources(map);
    setTileLayers(map);

    // startup hack, remove when mapbox gl js implements dataend
    var interval = setInterval(function () {
        var features = map.queryRenderedFeatures({
            layers: ['state-fill']
        }) || [];

        if (features.length > 0) {
            updateMap(map);
            clearInterval(interval);
        }
    }, 250);

});




map.on('moveend', debounce(function () {
    updateMap(map);
}, 250));

}());
//# sourceMappingURL=bundle.js.map
